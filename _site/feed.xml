<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>任志帆的个人博客</title>
    <description></description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sun, 29 Mar 2020 19:35:38 +0800</pubDate>
    <lastBuildDate>Sun, 29 Mar 2020 19:35:38 +0800</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>laravel7.0广播机制(Redis + socket.io)</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#广播服务提供者&quot; id=&quot;markdown-toc-广播服务提供者&quot;&gt;广播服务提供者&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#设置-redis-连接&quot; id=&quot;markdown-toc-设置-redis-连接&quot;&gt;设置 Redis 连接&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#建立-event&quot; id=&quot;markdown-toc-建立-event&quot;&gt;建立 Event&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#设置-api-路由&quot; id=&quot;markdown-toc-设置-api-路由&quot;&gt;设置 api 路由&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#安装前端脚手架&quot; id=&quot;markdown-toc-安装前端脚手架&quot;&gt;安装前端脚手架&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#redis&quot; id=&quot;markdown-toc-redis&quot;&gt;Redis&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#安装-laravel-echo-server-订阅-redis-sub&quot; id=&quot;markdown-toc-安装-laravel-echo-server-订阅-redis-sub&quot;&gt;安装 laravel-echo-server 订阅 Redis Sub&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#初始化-laravel-echo-server&quot; id=&quot;markdown-toc-初始化-laravel-echo-server&quot;&gt;初始化 laravel-echo-server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#启动-laravel-echo-server&quot; id=&quot;markdown-toc-启动-laravel-echo-server&quot;&gt;启动 laravel-echo-server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#测试广播&quot; id=&quot;markdown-toc-测试广播&quot;&gt;测试广播&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#安装-laravel-echo-的前依赖&quot; id=&quot;markdown-toc-安装-laravel-echo-的前依赖&quot;&gt;安装 laravel-echo 的前依赖&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#编辑-resourcejsbootstrapjs-添加如下代码&quot; id=&quot;markdown-toc-编辑-resourcejsbootstrapjs-添加如下代码&quot;&gt;编辑 resource/js/bootstrap.js 添加如下代码&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#测试页面&quot; id=&quot;markdown-toc-测试页面&quot;&gt;测试页面&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#基本构建&quot; id=&quot;markdown-toc-基本构建&quot;&gt;基本构建&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;广播服务提供者&quot;&gt;广播服务提供者&lt;/h2&gt;

&lt;p&gt;在广播任意事件之前，首先需要注册&lt;code class=&quot;highlighter-rouge&quot;&gt;App\Providers\BroadcastServiceProvider&lt;/code&gt;。在新安装的 Laravel 应用中，你只需要取消 &lt;code class=&quot;highlighter-rouge&quot;&gt;config/app.php&lt;/code&gt; 配置文件中 &lt;code class=&quot;highlighter-rouge&quot;&gt;providers&lt;/code&gt; 数组内对应服务提供者之前的注释即可。该提供者允许你注册广播授权路由和回调&lt;/p&gt;

&lt;h2 id=&quot;设置-redis-连接&quot;&gt;设置 Redis 连接&lt;/h2&gt;

&lt;p&gt;需要修改 &lt;code class=&quot;highlighter-rouge&quot;&gt;.env&lt;/code&gt; 文件中的广播驱动为 &lt;code class=&quot;highlighter-rouge&quot;&gt;redis&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;BROADCAST_DRIVER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;redis&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;建立-event&quot;&gt;建立 Event&lt;/h2&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;php&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;artisan&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OrderShipped&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;执行上诉命令之后 app 目录下会出现一个 Events 目录，在该目录下产生了广播事件类 &lt;code class=&quot;highlighter-rouge&quot;&gt;OrderShipped.php&lt;/code&gt;。我们要对自动生成的 OrderShipped 类进行以下修改&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;增加对 ShouldBroadcast 的实现&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;修改 broadcastOn 方法，使用公共广播通道 orderStatus&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;自定义广播的消息名(&lt;strong&gt;非必须&lt;/strong&gt;)【默认情况下，Laravel 会使用事件的类名来广播事件，不过，你可以通过在事件中定义 broadcastAs 方法来自定义广播名称：】&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;修改构造函数&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;完整修改如下 可直接替换&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App\Events&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Illuminate\Broadcasting\Channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Illuminate\Broadcasting\InteractsWithSockets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Illuminate\Broadcasting\PresenceChannel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Illuminate\Broadcasting\PrivateChannel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Illuminate\Contracts\Broadcasting\ShouldBroadcast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Illuminate\Foundation\Events\Dispatchable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Illuminate\Queue\SerializesModels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;OrderShipped&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ShouldBroadcast&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Dispatchable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;InteractsWithSockets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SerializesModels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//可添加任意成员变量&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//事件构造函数&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__construct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//自定义广播的消息名&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;broadcastAs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'anyName'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;sd&quot;&gt;/**
     * Get the channels the event should broadcast on.
     *
     * @return \Illuminate\Broadcasting\Channel|array
     */&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;broadcastOn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'orderStatus'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;设置-api-路由&quot;&gt;设置 api 路由&lt;/h2&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;Route&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/ship'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Request&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;broadcast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OrderShipped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 触发事件&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Order Shipped!'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;安装前端脚手架&quot;&gt;安装前端脚手架&lt;/h2&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;composer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;laravel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ui&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;php&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;artisan&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ui&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;auth&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;redis&quot;&gt;Redis&lt;/h2&gt;

&lt;p&gt;因为咱们使用 Redis 广播，需要安装 Predis 库：&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;composer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;predis&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;predis&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Redis 广播使用 Redis 的 pub/sub 功能进行广播；不过，你需要将其和能够接受 Redis 消息的 Websocket 服务器进行配对以便将消息广播到 Websocket 频道&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;当 Redis 广播发布事件时，事件将会被发布到指定的频道上，传递的数据是一个 JSON 格式的字符串，其中包含了事件名称、负载数据 data、以及生成事件 socket ID 的用户&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;安装-laravel-echo-server-订阅-redis-sub&quot;&gt;安装 laravel-echo-server 订阅 Redis Sub&lt;/h2&gt;

&lt;p&gt;如果使用 pusher 那么直接使只用 laravel 就可以了，如果使用 &lt;strong&gt;Redis + socket.io&lt;/strong&gt; 则需要使用开源项目 &lt;a href=&quot;https://github.com/tlaverdure/laravel-echo-server&quot;&gt;laravel-echo-server&lt;/a&gt; 。所以我们现在要使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;laravel-echo-server&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;全局安装&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;g&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;laravel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;server&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;初始化-laravel-echo-server&quot;&gt;初始化 laravel-echo-server&lt;/h2&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;laravel-echo-server init

// 是否在开发模式下运行此服务器（y/n） 输入y
? Do you want to run this server &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;development mode? &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;y/N&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

// 设置服务器的端口 默认 6001 输入 6001就可以了 或者你想要的
? Which port would you like to serve from? &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;6001&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

// 想用的数据库  选择 redis
? Which database would you like to use to store presence channel members? &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Use arrow keys&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
❯ redis
  sqlite

//   这里输入 你的laravel  项目的访问域名
? Enter the host of your Laravel authentication server. &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;http://localhost&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

// 选择 网络协议 http
? Will you be serving on http or https? &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Use arrow keys&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
❯ http
  https

// 您想为HTTP API生成客户端ID/密钥吗 N
? Do you want to generate a client ID/Key &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;HTTP API? &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;y/N&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

// 要设置对API的跨域访问吗？（y/n）N
Configuration file saved. Run laravel-echo-server start to run server.

//您希望将此配置另存为什么？ （laravel-echo-server.json）回车就行
? What &lt;span class=&quot;k&quot;&gt;do &lt;/span&gt;you want this config to be saved as? &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;laravel-echo-server.json&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;启动-laravel-echo-server&quot;&gt;启动 laravel-echo-server&lt;/h2&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;laravel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;start&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;成功启动后会输出以下日志&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;L&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;R&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;E&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;L&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;E&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;C&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;H&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;O&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;E&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;R&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;E&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;R&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;err&quot;&gt;⚠&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Starting&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;DEV&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;err&quot;&gt;✔&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;Running&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;localhost&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;port&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6001&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;✔&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;Channels&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;are&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ready&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;✔&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;Listening&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;http&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;events&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;✔&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;Listening&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;redis&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;events&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;Server&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ready&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;测试广播&quot;&gt;测试广播&lt;/h2&gt;

&lt;p&gt;在浏览器上执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;http://yourhost/api/ship?id=16&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;Channel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;laravel_database_orderStatus&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;anyName&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;laravel-echo-server 连接成功！&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;安装-laravel-echo-的前依赖&quot;&gt;安装 laravel-echo 的前依赖&lt;/h2&gt;

&lt;p&gt;由于前端使用的是 &lt;code class=&quot;highlighter-rouge&quot;&gt;laravel-echo&lt;/code&gt;来收听广播，我们选择的底层实现方式是&lt;code class=&quot;highlighter-rouge&quot;&gt;socket.io&lt;/code&gt;。所以首先我们要在&lt;code class=&quot;highlighter-rouge&quot;&gt;package.json&lt;/code&gt;中添加 &lt;code class=&quot;highlighter-rouge&quot;&gt;laravel-echo&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;socket.io&lt;/code&gt;的依赖&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;client&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;laravel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;编辑-resourcejsbootstrapjs-添加如下代码&quot;&gt;编辑 resource/js/bootstrap.js 添加如下代码&lt;/h2&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Echo&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;laravel-echo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;io&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;socket.io-client&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Echo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Echo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;broadcaster&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;socket.io&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hostname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;:6001&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;测试页面&quot;&gt;测试页面&lt;/h2&gt;

&lt;p&gt;在 &lt;code class=&quot;highlighter-rouge&quot;&gt;resources/views/&lt;/code&gt; 下建立页面 test.blade.php 内容为&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;!doctype html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;http-equiv=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;X-UA-Compatible&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;IE=edge&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;viewport&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;width=device-width, initial-scale=1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;csrf-token&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;News Room&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stylesheet&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
        News Room
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;Echo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;laravel_database_orderStatus&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 广播频道名称&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;.anyName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// 消息名称&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 收到消息进行的操作，参数 e 为所携带的数据&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;js 代码的意思是收听 news 通道内的 News 事件对象，将接收到的事件在控制台打印出来。&lt;/p&gt;

&lt;h2 id=&quot;基本构建&quot;&gt;基本构建&lt;/h2&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;watch&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sat, 28 Mar 2020 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2020-03-28-laravel7.0%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6(Redis-+-socket.io).html</link>
        <guid isPermaLink="true">http://localhost:4000/2020-03-28-laravel7.0%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6(Redis-+-socket.io).html</guid>
        
        <category>laravel</category>
        
        <category>广播</category>
        
        
        <category>Laravel</category>
        
      </item>
    
      <item>
        <title>B/S结构和C/S结构</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#bs结构&quot; id=&quot;markdown-toc-bs结构&quot;&gt;B/S结构&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#cs结构&quot; id=&quot;markdown-toc-cs结构&quot;&gt;C/S结构&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#bs结构和cs结构的区别&quot; id=&quot;markdown-toc-bs结构和cs结构的区别&quot;&gt;B/S结构和C/S结构的区别&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&lt;em&gt;B/S结构和C/S结构&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;blockquote&gt;
  &lt;p&gt;B/S和C/S都是随着互联网的发展而出现的一种网络结构模式，而其用的非常广泛，在我们生活中都很常见。那它们到底是什么呢？接下来就详细的介绍一下B/S和C/S。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/bs/bs-1.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;bs结构&quot;&gt;B/S结构&lt;/h2&gt;

&lt;p&gt;B是英文单词“Browser”的首字母，即浏览器的意思；S是英文单词“Server”的首字母，即服务器的意思。B/S就是“Browser/Server”的缩写，即“浏览器/服务器”模式。&lt;/p&gt;

&lt;p&gt;B/S结构是随着互联网的发展，web出现后兴起的一种网络结构模式。这种模式统一了客户端，让核心的业务处理在服务端完成。你只需要在自己电脑或手机上安装一个浏览器，就可以通过web Server与数据库进行数据交互。&lt;/p&gt;

&lt;p&gt;这下是不是明白了“B/S”结构是什么了呢？大家是不是每天都在使用这种结构呢？在手机或电脑上用浏览器上百度搜索、看新闻等就是在使用“B/S”结构进行数据交互&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/bs/bs-2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这种“B/S”结构有很多好处，维护和升级方式更简单，客户端是浏览器，基本不需要维护，只需要维护升级服务器端就可以，当然还有很多好处，在这就不一一介绍了&lt;/p&gt;

&lt;h2 id=&quot;cs结构&quot;&gt;C/S结构&lt;/h2&gt;

&lt;p&gt;C是英文单词“Client”的首字母，即客户端的意思，C/S就是“Client/Server”的缩写，即“客户端/服务器”模式。&lt;/p&gt;

&lt;p&gt;C/S结构是一种软件系统体系结构，也是生活中很常见的。这种结构是将需要处理的业务合理地分配到客户端和服务器端，这样可以大大降低通信成本，但是升级维护相对困难。比如我们手机中安装的微信、qq、王者荣耀等应用程序就是C/S结构&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/bs/bs-3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;bs结构和cs结构的区别&quot;&gt;B/S结构和C/S结构的区别&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;硬件环境不同，C/S通常是建立在专用的网络上，小范围的网络环境。而B/S是建立在广域网上的，适应范围强，通常有操作系统和浏览器就行；&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;C/结构比B/S结构更安全，因为用户群相对固定，对信息的保护更强；&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;B/S结构维护升级比较简单，而C/S结构维护升级相对困难&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Wed, 29 Jan 2020 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2020-01-29-BS%E7%BB%93%E6%9E%84%E5%92%8CCS%E7%BB%93%E6%9E%84.html</link>
        <guid isPermaLink="true">http://localhost:4000/2020-01-29-BS%E7%BB%93%E6%9E%84%E5%92%8CCS%E7%BB%93%E6%9E%84.html</guid>
        
        <category>B/S</category>
        
        <category>C/S</category>
        
        
        <category>Network</category>
        
      </item>
    
      <item>
        <title>https协议</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#为什么需要https&quot; id=&quot;markdown-toc-为什么需要https&quot;&gt;为什么需要https&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#https是如何保障安全的&quot; id=&quot;markdown-toc-https是如何保障安全的&quot;&gt;HTTPS是如何保障安全的&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#神马是tlsssl&quot; id=&quot;markdown-toc-神马是tlsssl&quot;&gt;神马是TLS/SSL？&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#传输加密的流程&quot; id=&quot;markdown-toc-传输加密的流程&quot;&gt;传输加密的流程&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#https是如何加密数据的&quot; id=&quot;markdown-toc-https是如何加密数据的&quot;&gt;HTTPS是如何加密数据的&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#对称加密&quot; id=&quot;markdown-toc-对称加密&quot;&gt;对称加密&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#非对称加密&quot; id=&quot;markdown-toc-非对称加密&quot;&gt;非对称加密&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#公钥私钥两个有什么联系呢&quot; id=&quot;markdown-toc-公钥私钥两个有什么联系呢&quot;&gt;公钥、私钥两个有什么联系呢？&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#https-的底层原理如下&quot; id=&quot;markdown-toc-https-的底层原理如下&quot;&gt;HTTPS 的底层原理如下&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ssl-与-tls&quot; id=&quot;markdown-toc-ssl-与-tls&quot;&gt;SSL 与 TLS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&lt;em&gt;https协议&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;为什么需要https&quot;&gt;为什么需要https&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP是&lt;strong&gt;明文传输&lt;/strong&gt;的，也就意味着，介于发送端、接收端中间的任意节点都可以知道你们传输的内容是什么。这些节点可能是路由器、代理等。
举个最常见的例子，用户登陆。用户输入账号，密码，采用HTTP的话，只要在代理服务器上做点手脚就可以拿到你的密码了。
用户登陆 –&amp;gt; 代理服务器（做手脚）–&amp;gt; 实际授权服务器&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在发送端对密码进行加密？没用的，虽然别人不知道你原始密码是多少，但能够拿到加密后的账号密码，照样能登陆。(这也是很多人觉得前端加密并没有啥软用)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;https是如何保障安全的&quot;&gt;HTTPS是如何保障安全的&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;稍微了解网络基础的同学都知道，HTTP是应用层协议，位于HTTP协议之下是传输协议TCP。TCP负责传输，HTTP则定义了数据如何进行包装。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/https/https-2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;从上面图中我们可以看出：HTTPS相对于HTTP有哪些不同呢？其实就是在HTTP跟TCP中间加多了一层加密层TLS/SSL。&lt;/p&gt;

&lt;h3 id=&quot;神马是tlsssl&quot;&gt;神马是TLS/SSL？&lt;/h3&gt;

&lt;p&gt;通俗的讲，TLS、SSL其实是类似的东西，SSL中文叫做“安全套接层”，SSL是个加密套件，负责对HTTP的数据进行加密。TLS是SSL的升级版。现在提到HTTPS，加密套件基本指的是TLS。&lt;/p&gt;

&lt;h3 id=&quot;传输加密的流程&quot;&gt;传输加密的流程&lt;/h3&gt;

&lt;p&gt;原先是应用层将数据直接给到TCP进行传输，现在改成应用层将数据给到TLS/SSL，将数据加密后，再给到TCP进行传输。&lt;/p&gt;

&lt;p&gt;就是这么回事。将数据加密后再传输，而不是任由数据在复杂而又充满危险的网络上明文裸奔，在很大程度上确保了数据的安全。这样的话，即使数据被中间节点截获，坏人也看不懂&lt;/p&gt;

&lt;h2 id=&quot;https是如何加密数据的&quot;&gt;HTTPS是如何加密数据的&lt;/h2&gt;

&lt;p&gt;一般来说，加密分为&lt;strong&gt;对称加密&lt;/strong&gt;、&lt;strong&gt;非对称加密&lt;/strong&gt;（也叫公开密钥加密）。&lt;/p&gt;

&lt;h3 id=&quot;对称加密&quot;&gt;对称加密&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;对称加密&lt;/strong&gt;的意思就是，加密数据用的密钥，跟解密数据用的密钥是一样的。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;对称内容加密强度非常高，一般破解不了。但存在一个很大的问题就是无法安全地生成和保管密钥。假如客户端软件和服务器之间每次会话都使用固定的，相同的密钥加密和解密，肯定存在很大的安全隐患。如果有人从客户端端获取到了对称密钥，整个内容就不存在安全性了，而且管理海量的客户端密钥也是一件很复杂的事情&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;非对称加密&quot;&gt;非对称加密&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;非对称加密的意思就是，&lt;strong&gt;加密数据用的密钥（公钥），跟解密数据用的密钥（私钥）是不一样的&lt;/strong&gt;。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;什么叫做公钥呢？其实就是字面上的意思——公开的密钥，谁都可以查到。因此非对称加密也叫做公开密钥加密。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;相对应的，私钥就是非公开的密钥，一般是由网站的管理员持有&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;公钥私钥两个有什么联系呢&quot;&gt;公钥、私钥两个有什么联系呢？&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;简单的说就是，通过公钥加密的数据，只能通过私钥解开。通过私钥加密的数据，只能通过公钥解开。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;很多同学都知道用私钥能解开公钥加密的数据，但忽略了一点，私钥加密的数据，同样可以用公钥解密出来。而这点对于理解HTTPS的整套加密、授权体系非常关键。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;非对称密钥交换很安全，但同时也是 HTTPS 性能和速度降低的“罪魁祸首”&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;https-的底层原理如下&quot;&gt;HTTPS 的底层原理如下&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/https/https-1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;当我们访问一个 HTTPS 网站的时候，客户端通过发送 Client Hello 报文开始建立与服务器的 SSL 通信，报文中包含了 SSL 协议版本、加密组件、压缩算法等信息，另外，还有一个随机数，用于后续对称加密密钥的协商&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;服务器可以进行 SSL 通信时，会以 Server Hello 报文作为应答，和客户端一样，在报文中包含 SSL 协议版本、加密组件、压缩算法等信息，同时还有一个随机数，用于后续对称加密密钥的协商&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;接下来，服务器会以 Certificate 报文的形式给客户端发送服务端的数字证书，其中包含了非对称加密用到的公钥信息。最后，服务器还会发送 Server Hello Done 报文告知客户端，最初阶段的 SSL 握手协商部分结束&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;客户端当然不相信这个证书，于是从自己信任的 CA 仓库中，拿 CA 证书里面的公钥去解密 HTTPS 网站的数字证书（证书是通过 CA 私钥加密的，所以要用公钥解密），如果能够成功，则说明 HTTPS 网站是可信的&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;证书验证完毕之后，觉得这个 HTTPS 网站可信，于是客户端计算产生随机数字 Pre-master，用服务器返回的数字证书中的公钥加密该随机数字，再通过 Client Key Exchange 报文发送给服务器，服务器可以通过对应的私钥解密出 Pre-master。到目前为止，无论是客户端还是服务器，都有了三个随机数，分别是：自己的、对端的，以及刚生成的 Pre-Master 随机数。通过这三个随机数，可以在客户端和服务器生成相同的对称加密密钥&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;有了对称加密密钥，客户端就可以通过 Change Cipher Spec 报文告知服务器以后都采用该密钥和协商的加密算法进行加密通信了&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;然后客户端还会发送一个 Encrypted Handshake Message 报文，将已经商定好的参数，采用对称加密密钥进行加密，发送给服务器用于数据与握手验证&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;同样，服务器也可以发送 Change Cipher Spec 报文，告知客户端以后都采用协商的对称加密密钥和加密算法进行加密通信了，并且也发送 Encrypted Handshake Message 报文进行测试。当双方握手结束之后，就可以通过对称加密密钥进行加密传输了&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这个过程除了加密解密之外，其他的过程和 HTTP 是一样的，过程也非常复杂。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;上面的过程只包含了 HTTPS 的单向认证，也即客户端验证服务端的证书，大部分场景下使用的都是单向认证，也可以在更加严格安全要求的情况下，启用双向认证，双方互相验证证书，比如银行的网银系统就是这样，需要客户端安装数字证书后才能登录，其实就要服务端要要验证客户端的合法性&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;ssl-与-tls&quot;&gt;SSL 与 TLS&lt;/h2&gt;

&lt;p&gt;TLS（Transport Layer Security，传输层安全）是 SSL 的升级版（Secure Socket Layer，安全套接层），建立在 SSL 3.0 协议规范之上，由于 SSL 这一术语非常常用，所以通常我们把 SSL 和 TLS 统称为 SSL，从这个角度来说，不管是基于 TLS 还是 SSL 实现的 HTTPS，将其描述为 HTTP over SSL 并没有什么问题&lt;/p&gt;
</description>
        <pubDate>Mon, 27 Jan 2020 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2020-01-27-https%E5%8D%8F%E8%AE%AE.html</link>
        <guid isPermaLink="true">http://localhost:4000/2020-01-27-https%E5%8D%8F%E8%AE%AE.html</guid>
        
        <category>https</category>
        
        
        <category>Network</category>
        
      </item>
    
      <item>
        <title>HTTP协议详解</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#http简介&quot; id=&quot;markdown-toc-http简介&quot;&gt;HTTP简介&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#浏览网页是http的主要应用但是这并不代表http就只能应用于网页的浏览http是一种协议只要通信的双方都遵守这个协议http就能有用武之地比如咱们常用的qq迅雷这些软件都会使用http协议还包括其他的协议&quot; id=&quot;markdown-toc-浏览网页是http的主要应用但是这并不代表http就只能应用于网页的浏览http是一种协议只要通信的双方都遵守这个协议http就能有用武之地比如咱们常用的qq迅雷这些软件都会使用http协议还包括其他的协议&quot;&gt;浏览网页是HTTP的主要应用，但是这并不代表HTTP就只能应用于网页的浏览。HTTP是一种协议，只要通信的双方都遵守这个协议，HTTP就能有用武之地。比如咱们常用的QQ，迅雷这些软件，都会使用HTTP协议(还包括其他的协议)。&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#http特点&quot; id=&quot;markdown-toc-http特点&quot;&gt;HTTP特点&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#http工作流程&quot; id=&quot;markdown-toc-http工作流程&quot;&gt;HTTP工作流程&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#点击一个url会发生的一系列事件&quot; id=&quot;markdown-toc-点击一个url会发生的一系列事件&quot;&gt;点击一个URL会发生的一系列事件&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#代理服务器&quot; id=&quot;markdown-toc-代理服务器&quot;&gt;代理服务器&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#http之请求消息request&quot; id=&quot;markdown-toc-http之请求消息request&quot;&gt;HTTP之请求消息Request&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#get请求例子&quot; id=&quot;markdown-toc-get请求例子&quot;&gt;Get请求例子&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#post请求例子&quot; id=&quot;markdown-toc-post请求例子&quot;&gt;POST请求例子&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#http之响应消息response&quot; id=&quot;markdown-toc-http之响应消息response&quot;&gt;HTTP之响应消息Response&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#http之状态码&quot; id=&quot;markdown-toc-http之状态码&quot;&gt;HTTP之状态码&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#最无耻的-http-常用状态码图解&quot; id=&quot;markdown-toc-最无耻的-http-常用状态码图解&quot;&gt;最无耻的 HTTP 常用状态码图解&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#http请求方法&quot; id=&quot;markdown-toc-http请求方法&quot;&gt;HTTP请求方法&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#get和post的区别&quot; id=&quot;markdown-toc-get和post的区别&quot;&gt;GET和POST的区别&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#表面的区别&quot; id=&quot;markdown-toc-表面的区别&quot;&gt;表面的区别&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#没有区别的回答&quot; id=&quot;markdown-toc-没有区别的回答&quot;&gt;没有区别的回答&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#重大区别&quot; id=&quot;markdown-toc-重大区别&quot;&gt;重大区别&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&lt;em&gt;HTTP协议详解&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;http简介&quot;&gt;HTTP简介&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP协议，即超文本传输协议(Hypertext transfer protocol)。是一种详细规定了浏览器和万维网(WWW = World Wide Web)服务器之间互相通信的规则，通过因特网传送万维网文档的数据传送协议。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP协议作为TCP/IP模型中应用层的协议也不例外。HTTP协议通常承载于TCP协议之上，有时也承载于TLS或SSL协议层之上，这个时候，就成了我们常说的HTTPS。如下图：&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/static/img/http/http-1.png&quot; alt=&quot;http-1.png&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP是一个&lt;strong&gt;应用层协议&lt;/strong&gt;，由请求和响应构成，是一个标准的客户端服务器模型。HTTP是一个无状态的协议。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP默认的端口号为80，HTTPS的端口号为443。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h2 id=&quot;浏览网页是http的主要应用但是这并不代表http就只能应用于网页的浏览http是一种协议只要通信的双方都遵守这个协议http就能有用武之地比如咱们常用的qq迅雷这些软件都会使用http协议还包括其他的协议&quot;&gt;浏览网页是HTTP的主要应用，但是这并不代表HTTP就只能应用于网页的浏览。HTTP是一种协议，只要通信的双方都遵守这个协议，HTTP就能有用武之地。比如咱们常用的QQ，迅雷这些软件，都会使用HTTP协议(还包括其他的协议)。&lt;/h2&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;http特点&quot;&gt;HTTP特点&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;简单快速&lt;/strong&gt;：客户向服务器请求服务时，只需传送请求方法和路径。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;灵活&lt;/strong&gt;：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;HTTP 0.9和1.0使用非持续连接&lt;/strong&gt;：限制每次连接只处理一个请求，服务器处理完客户的请求，并收到客户的应答后，即断开连接。&lt;strong&gt;HTTP 1.1使用持续连接&lt;/strong&gt;：不必为每个web对象创建一个新的连接，一个连接可以传送多个对象，采用这种方式可以节省传输时间&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;无状态&lt;/strong&gt;：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;支持B/S及C/S模式&lt;/strong&gt;。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;http工作流程&quot;&gt;HTTP工作流程&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;每个万维网的网点都有一个服务器进程，它不断的监听TCP端口80，以便发现是否有浏览器向它发出连接请求，一旦坚挺到连接建立请求，就通过三次握手建立TCP连接，然后浏览器会向服务器发出浏览某个页面的请求，服务器接着返回所请求的页面作为响应，然后TCP连接就被释放了&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这些响应和请求报文都遵循一定的格式，这就是HTTP协议所规定的
&lt;img src=&quot;/static/img/http/http-2.png&quot; alt=&quot;http-1.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;点击一个url会发生的一系列事件&quot;&gt;点击一个URL会发生的一系列事件&lt;/h3&gt;

&lt;p&gt;(1) 浏览器分析超链指向页面的 URL。&lt;/p&gt;

&lt;p&gt;  (2) 浏览器向 DNS 请求解析 www.tsinghua.edu.cn 的 IP 地址。&lt;/p&gt;

&lt;p&gt;  (3) 域名系统 DNS 解析出清华大学服务器的 IP 地址。&lt;/p&gt;

&lt;p&gt;  (4) 浏览器与服务器建立 TCP 连接&lt;/p&gt;

&lt;p&gt;  (5) 浏览器发出取文件命令：如 GET /chn/yxsz/index.htm。&lt;/p&gt;

&lt;p&gt;  (6) 服务器给出响应，把文件 index.htm 发给浏览器。&lt;/p&gt;

&lt;p&gt;  (7) TCP 连接释放。&lt;/p&gt;

&lt;p&gt;  (8) 浏览器显示“清华大学院系设置”文件 index.htm 中的所有文本&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/http/http-3.png&quot; alt=&quot;http-1.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;代理服务器&quot;&gt;代理服务器&lt;/h3&gt;

&lt;p&gt;代理服务器(proxy server)又称为万维网高速缓存(Web cache)，它代表浏览器发出HTTP请求。代理服务器把最近的一些请求和响应暂存在本地磁盘中。当与暂时存放的请求相同的新请求到达时，万维网高速缓存就把暂存的响应发送出去，而不需要按URL的地址再去因特网访问该资源&lt;/p&gt;

&lt;p&gt;在不使用代理服务器时，所有的主机都需要与因特网上的服务器建立连接，会使得链路负载比较大；使用代理服务器可以降低链路的压力。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/http/http-4.png&quot; alt=&quot;http-1.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;使用高速缓存的情况：&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;  （1）浏览器访问因特网的服务器时，要先与校园网的高速缓存建立TCP连接，并向高速缓存发出HTTP请求报文&lt;/p&gt;

&lt;p&gt;  （2）若高速缓存已经存放了所请求的对象，则将此对象放入HTTP响应报文中返回给浏览器。&lt;/p&gt;

&lt;p&gt;  （3）否则，高速缓存就代表发出请求的用户浏览器，与因特网上的源点服务器建立TCP连接，并发送HTTP请求报文。&lt;/p&gt;

&lt;p&gt;  （4）源点服务器将所请求的对象放在HTTP响应报文中返回给校园网的高速缓存。&lt;/p&gt;

&lt;p&gt;  （5）高速缓存收到此对象后，先复制在其本地存储器中（为今后使用），然后再将该对象放在HTTP响应报文中，通过已建立的TCP连接，返回给请求该对象的浏览器。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/http/http-5.png&quot; alt=&quot;http-1.png&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;总结起来，代理服务器有时作为服务器接受来自浏览器的HTTP请求，有时又会作为客户去向因特网上的原点服务器发送HTTP请求，具有双重身份。同时，由于使用了高速缓存，相当大的一部分通信量都限制在了校园网的内部，减小了网络链路的负载&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;http之请求消息request&quot;&gt;HTTP之请求消息Request&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;客户端发送一个HTTP请求到服务器的请求消息包括以下格式：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;请求行&lt;/em&gt;&lt;/strong&gt;、&lt;strong&gt;&lt;em&gt;请求头部&lt;/em&gt;&lt;/strong&gt;、&lt;strong&gt;&lt;em&gt;空行&lt;/em&gt;&lt;/strong&gt;和&lt;strong&gt;&lt;em&gt;请求数据&lt;/em&gt;&lt;/strong&gt;四个部分组成。&lt;/p&gt;

&lt;h3 id=&quot;get请求例子&quot;&gt;Get请求例子&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/http/http-6.png&quot; alt=&quot;http-1.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;第一部分：请求行，&lt;strong&gt;用来说明请求类型,要访问的资源以及所使用的HTTP版本，&lt;/strong&gt;.
GET说明请求类型为GET,[/562f25980001b1b106000338.jpg]为要访问的资源，该行的最后一部分说明使用的是HTTP1.1版本。&lt;/p&gt;

&lt;p&gt;第二部分：，&lt;strong&gt;请求头部，紧接着请求行（即第一行）之后的部分，用来说明服务器要使用的附加信息，&lt;/strong&gt;
从第二行起为请求头部，HOST将指出请求的目的地.User-Agent,服务器端和客户端脚本都能访问它,它是浏览器类型检测逻辑的重要基础.该信息由你的浏览器来定义,并且在每个请求中自动发送等等&lt;/p&gt;

&lt;p&gt;第三部分：，&lt;strong&gt;空行，请求头部后面的空行是必须的，&lt;/strong&gt;
即使第四部分的请求数据为空，也必须有空行。&lt;/p&gt;

&lt;p&gt;第四部分：，&lt;strong&gt;请求数据也叫主体，可以添加任意的其他数据，&lt;/strong&gt;。
这个例子的请求数据为空。&lt;/p&gt;

&lt;h3 id=&quot;post请求例子&quot;&gt;POST请求例子&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/http/http-7.png&quot; alt=&quot;http-1.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;第一部分：请求行，第一行明了是post请求，以及http1.1版本。
第二部分：请求头部，第二行至第六行。
第三部分：空行，第七行的空行。
第四部分：请求数据，第八行。&lt;/p&gt;

&lt;h2 id=&quot;http之响应消息response&quot;&gt;HTTP之响应消息Response&lt;/h2&gt;

&lt;p&gt;一般情况下，服务器接收并处理客户端发过来的请求后会返回一个HTTP的响应消息。&lt;/p&gt;

&lt;p&gt;HTTP响应也由四个部分组成，分别是：&lt;strong&gt;状态行&lt;/strong&gt;、&lt;strong&gt;消息报头&lt;/strong&gt;、&lt;strong&gt;空行&lt;/strong&gt;和&lt;strong&gt;响应正文&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/http/http-8.png&quot; alt=&quot;http-1.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;第一部分：&lt;strong&gt;状态行，由HTTP协议版本号， 状态码， 状态消息 三部分组成&lt;/strong&gt;。
第一行为状态行，（HTTP/1.1）表明HTTP版本为1.1版本，状态码为200，状态消息为（ok）&lt;/p&gt;

&lt;p&gt;第二部分：&lt;strong&gt;消息报头，用来说明客户端要使用的一些附加信息&lt;/strong&gt;
第二行和第三行和第四行为消息报头，
Date:生成响应的日期和时间；Content-Type:指定了MIME类型的HTML(text/html),编码类型是ISO-8859-1&lt;/p&gt;

&lt;p&gt;第三部分：&lt;strong&gt;空行，消息报头后面的空行是必须的&lt;/strong&gt;
第四部分：&lt;strong&gt;响应正文，服务器返回给客户端的文本信息&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;空行后面的html部分为响应正文。&lt;/p&gt;

&lt;h2 id=&quot;http之状态码&quot;&gt;HTTP之状态码&lt;/h2&gt;

&lt;p&gt;状态代码有&lt;strong&gt;三位数字&lt;/strong&gt;组成，第一个数字定义了响应的类别，共分五种类别:&lt;/p&gt;

&lt;p&gt;1xx：指示信息–表示请求已接收，继续处理&lt;/p&gt;

&lt;p&gt;2xx：成功–表示请求已被成功接收、理解、接受&lt;/p&gt;

&lt;p&gt;3xx：重定向–要完成请求必须进行更进一步的操作&lt;/p&gt;

&lt;p&gt;4xx：客户端错误–请求有语法错误或请求无法实现&lt;/p&gt;

&lt;p&gt;5xx：服务器端错误–服务器未能实现合法的请求&lt;/p&gt;

&lt;h3 id=&quot;最无耻的-http-常用状态码图解&quot;&gt;最无耻的 HTTP 常用状态码图解&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/http/http-9.jpg&quot; alt=&quot;http-1.png&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;301  永久移动位置，被请求的资源已经被永久性的转移了位置
302  您请求的资源现在需要临时通过其他的 URI 来获取
305  使用代理，被请求的资源必须通过指定的代理才能访问到
307  临时跳转。被请求的资源在临时从不同的URL响应请求
400  请求错误
402  该状态码是为了将来可能的需求而预留的，比如可能用于一些数字货币或者是微支付
403  禁止访问。服务器已经理解请求，但是拒绝执行它
404  找不到对象。请求失败，资源不存在，程序员找对象简直是宇宙谜题
406  不可接受的。请求的资源的内容特性无法满足请求头中的条件，因而无法生成响应实体
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/http/http-10.jpg&quot; alt=&quot;http-1.png&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;408  请求超时，请活活憋死吧
409  请求冲突。由于和被请求的资源的当前状态之间存在冲突，请求无法完成
410  遗失的。被请求的资源在服务器上已经不再可用，而且没有任何已知的转发地址
413  响应实体太大。服务器拒绝处理当前请求，请求超过服务器所能处理和允许的最大值
417  期望失败。在请求头 Expect 中指定的预期内容无法被服务器满足
418  我是一个茶壶。超文本咖啡罐控制协议，但是并没有被实际的HTTP服务器实现
420  方法失效
422  不可处理的实体。请求格式正确，但是由于含有语义错误，无法响应
500  服务器内部错误。服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;http请求方法&quot;&gt;HTTP请求方法&lt;/h2&gt;

&lt;p&gt;HTTP 设计了很多动词，来表示不同的操作&lt;/p&gt;

&lt;p&gt;先来解释一个概念，幂等性，指一次和多次请求某一个资源应该具有同样的副作用，也就是一次访问与多次访问，对这个资源带来的变化是相同的。&lt;/p&gt;

&lt;p&gt;常用的动词及幂等性&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;动词&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;描述&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;是否幂等&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;GET&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;获取资源，单个或多个&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;是&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;POST&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;创建资源&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;否&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;PUT&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;更新资源，客户端提供完整的资源数据&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;是&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;PATCH&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;更新资源，客户端提供部分的资源数据&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;否&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;DELETE&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;删除资源&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;是&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;get和post的区别&quot;&gt;GET和POST的区别&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;本质上来说，&lt;strong&gt;GET&lt;/strong&gt;用于&lt;strong&gt;查询&lt;/strong&gt;，&lt;strong&gt;POST&lt;/strong&gt;用于&lt;strong&gt;修改&lt;/strong&gt;。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;GET方式提交数据，会带来安全问题，比如一个登录页面，通过GET方式提交数据时，用户名和密码将出现在URL上，如果页面可以被缓存或者其他人可以访问这台机器，就可以从历史记录获得该用户的账号和密码.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;表面的区别&quot;&gt;表面的区别&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;GET在浏览器&lt;strong&gt;回退时&lt;/strong&gt;是无害的，而&lt;strong&gt;POST&lt;/strong&gt;会&lt;strong&gt;再次提交请求&lt;/strong&gt;。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;GET产生的URL地址可以被保存为书签，而POST不可以。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;GET请求会被浏览器主动cache，而POST不会，除非手动设置。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;GET请求只能进行url编码，而POST支持多种编码方式。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;get方式提交数据的大小（一般来说1024字节），http协议并没有硬性限制，而是与浏览器、服务器、操作系统有关，而POST理论上来说没有大小限制，http协议规范也没有进行大小限制，但实际上post所能传递的数据量根据取决于服务器的设置和内存大小。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;对参数的数据类型，GET只接受ASCII字符，而POST没有限制。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;GET请求在URL中传送的参数是&lt;strong&gt;有长度限制&lt;/strong&gt;的，而POST通过&lt;strong&gt;Body&lt;/strong&gt;传送数据，&lt;strong&gt;长度没有限制&lt;/strong&gt;。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;没有区别的回答&quot;&gt;没有区别的回答&lt;/h3&gt;

&lt;p&gt;GET和POST是HTTP协议中的两种发送请求的方法。&lt;/p&gt;

&lt;p&gt;HTTP是基于TCP/IP的关于数据如何在万维网中如何通信的协议。&lt;/p&gt;

&lt;p&gt;HTTP的底层是TCP/IP。所以GET和POST的底层也是TCP/IP，也就是说，GET/POST都是TCP链接。GET和POST能做的事情是一样一样的。你要给GET加上request body，给POST带上url参数，技术上是完全行的通的。&lt;/p&gt;

&lt;p&gt;GET和POST本质上就是TCP链接，并无差别。但是由于HTTP的规定和浏览器/服务器的限制，导致他们在应用过程中体现出一些不同&lt;/p&gt;

&lt;h3 id=&quot;重大区别&quot;&gt;重大区别&lt;/h3&gt;

&lt;p&gt;GET产生一个TCP数据包；POST产生两个TCP数据包。&lt;/p&gt;

&lt;p&gt;对于GET方式的请求，浏览器会把http header和data一并发送出去，服务器响应200（返回数据）；&lt;/p&gt;

&lt;p&gt;而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok（返回数据）。&lt;/p&gt;

&lt;p&gt;因为POST需要两步，时间上消耗的要多一点，看起来GET比POST更有效。因此Yahoo团队有推荐用GET替换POST来优化网站性能。但这是一个坑！跳入需谨慎。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;GET与POST都有自己的语义，不能随便混用。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;据研究，在网络环境好的情况下，发一次包的时间和发两次包的时间差别基本可以无视。而在网络环境差的情况下，两次包的TCP在验证数据包完整性上，有非常大的优点。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;并不是所有浏览器都会在POST中发送两次包，Firefox就只发送一次。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
  &lt;p&gt;看了这么多，是不是会觉得一脸懵逼，在你做项目的时候要注意：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;get一般是用来获取数据，post提交数据&lt;/p&gt;

&lt;p&gt;post其实是有大小限制的，只不过是取决于服务器的设置和内存大小。&lt;/p&gt;

&lt;p&gt;还有更深入的区别：&lt;/p&gt;

&lt;p&gt;GET是用来向获取服务器信息的，请求报文传输的信息只是用于描述所需资源的参数，返回的信息才是数据本身；POST是用来向服务器传递数据的，其请求报文传递的信息就是数据本身，返回的报文只是操作的结果。&lt;/p&gt;
</description>
        <pubDate>Sun, 26 Jan 2020 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2020-01-26-HTTP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3.html</link>
        <guid isPermaLink="true">http://localhost:4000/2020-01-26-HTTP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3.html</guid>
        
        <category>http</category>
        
        
        <category>Network</category>
        
      </item>
    
      <item>
        <title>网页调用微信Jssdk实现扫一扫功能</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#微信公众号配置&quot; id=&quot;markdown-toc-微信公众号配置&quot;&gt;微信公众号配置&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#第一步js接口安全域设置&quot; id=&quot;markdown-toc-第一步js接口安全域设置&quot;&gt;第一步，JS接口安全域设置&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#第二步配置ip白名单&quot; id=&quot;markdown-toc-第二步配置ip白名单&quot;&gt;第二步，配置ip白名单。&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#导入相关js&quot; id=&quot;markdown-toc-导入相关js&quot;&gt;导入相关JS&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#通过config接口注入权限验证配置&quot; id=&quot;markdown-toc-通过config接口注入权限验证配置&quot;&gt;通过config接口注入权限验证配置&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#调起扫一扫接口&quot; id=&quot;markdown-toc-调起扫一扫接口&quot;&gt;调起扫一扫接口&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#项目链接&quot; id=&quot;markdown-toc-项目链接&quot;&gt;项目链接&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&lt;em&gt;网页调用微信Jssdk实现扫一扫功能&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;微信公众号配置&quot;&gt;微信公众号配置&lt;/h2&gt;

&lt;h3 id=&quot;第一步js接口安全域设置&quot;&gt;第一步，JS接口安全域设置&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/static/img/weixinsys/1.png&quot; alt=&quot;1.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;第二步配置ip白名单&quot;&gt;第二步，配置ip白名单。&lt;/h3&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; 换服务器的时候被坑了。。。一直报config:invalid signature，之前都是弄好的。后面忘了
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/static/img/weixinsys/2.png&quot; alt=&quot;1.png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;导入相关js&quot;&gt;导入相关JS&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;在需要调用JS接口的页面引入如下JS文件，（支持https）：
&lt;a href=&quot;http://res.wx.qq.com/open/js/jweixin-1.2.0.js&quot;&gt;http://res.wx.qq.com/open/js/jweixin-1.2.0.js&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;通过config接口注入权限验证配置&quot;&gt;通过config接口注入权限验证配置&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var _data = {

  tokenUrl:location.href,

  t:Math.random()

};

var _getWechatSignUrl = HTTP_AUTH_HOST_SERVER+'czj/wx/XSign';

// 获取微信签名

$.ajax({

  url:_getWechatSignUrl,

  data:_data,

  dataType:&quot;jsonp&quot;,

  success:function (o) {

        //alert('获取数据：timestamp:'+o.value.timestamp+'nonceStr:'+o.value.nonceStr+'signature:'+o.value.signature);

     console.log(&quot;获取微信签名:&quot;+o);

  if (o.result ==true) {

    wxConfig(o.value.timestamp, o.value.nonceStr, o.value.signature,o.value.appId);

    console.log(&quot;appid:&quot;+o.value.appId)

}

},err:function (err) {

      alert(&quot;----&quot;+err);

}

});

function wxConfig(_timestamp, _nonceStr, _signature,_appId) {

     //alert('获取数据：'+_timestamp+'\n'+_nonceStr+'\n'+_signature);

    console.log('获取数据：' + _timestamp +'\n' + _nonceStr +'\n' + _signature);

  wx.config({

  debug:false,// 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。

        appId: _appId,// 必填，公众号的唯一标识

        timestamp: _timestamp,// 必填，生成签名的时间戳

        nonceStr: _nonceStr,// 必填，生成签名的随机串

        signature: _signature,// 必填，签名，见附录1

        jsApiList: ['checkJsApi','scanQRCode']

// 必填，需要使用的JS接口列表，所有JS接口列表见附录2

    });

}     
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;调起扫一扫接口&quot;&gt;调起扫一扫接口&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function scanCode(callback) {

  wx.scanQRCode({

  needResult:1,

  scanType: [&quot;qrCode&quot;,&quot;barCode&quot;],

  success:function (res) {

        console.log(res)

  //alert(JSON.stringify(res));

        var result = res.resultStr;

        setTimeout(callback(result),500);

   },

  error:function(res){

        alert(JSON.stringify(res))

        if(res.errMsg.indexOf('function_not_exist') &amp;gt;0){

        alert('版本过低请升级')

      }

    }

  });

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;项目链接&quot;&gt;项目链接&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/renzhifan/origin&quot;&gt;项目链接&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 02 Jan 2020 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2020-01-02-%E7%BD%91%E9%A1%B5%E8%B0%83%E7%94%A8%E5%BE%AE%E4%BF%A1Jssdk%E5%AE%9E%E7%8E%B0%E6%89%AB%E4%B8%80%E6%89%AB%E5%8A%9F%E8%83%BD.html</link>
        <guid isPermaLink="true">http://localhost:4000/2020-01-02-%E7%BD%91%E9%A1%B5%E8%B0%83%E7%94%A8%E5%BE%AE%E4%BF%A1Jssdk%E5%AE%9E%E7%8E%B0%E6%89%AB%E4%B8%80%E6%89%AB%E5%8A%9F%E8%83%BD.html</guid>
        
        <category>微信</category>
        
        <category>扫一扫</category>
        
        
        <category>WeChat</category>
        
      </item>
    
      <item>
        <title>ubuntu 安装 elasticsearch和ik-analyzer中文分词</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#安装java环境&quot; id=&quot;markdown-toc-安装java环境&quot;&gt;安装java环境&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#安装elasticsearch&quot; id=&quot;markdown-toc-安装elasticsearch&quot;&gt;安装Elasticsearch&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#安装公钥&quot; id=&quot;markdown-toc-安装公钥&quot;&gt;安装公钥&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#添加源&quot; id=&quot;markdown-toc-添加源&quot;&gt;添加源&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#安装es&quot; id=&quot;markdown-toc-安装es&quot;&gt;安装es&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#命令管理&quot; id=&quot;markdown-toc-命令管理&quot;&gt;命令管理&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#systemd&quot; id=&quot;markdown-toc-systemd&quot;&gt;systemd&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#启动&quot; id=&quot;markdown-toc-启动&quot;&gt;启动&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#关闭&quot; id=&quot;markdown-toc-关闭&quot;&gt;关闭&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#端口与查看&quot; id=&quot;markdown-toc-端口与查看&quot;&gt;端口与查看&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#访问试下&quot; id=&quot;markdown-toc-访问试下&quot;&gt;访问试下&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#配置-elasticsearch&quot; id=&quot;markdown-toc-配置-elasticsearch&quot;&gt;配置 Elasticsearch&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#配置参数&quot; id=&quot;markdown-toc-配置参数&quot;&gt;配置参数&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#包的目录布局&quot; id=&quot;markdown-toc-包的目录布局&quot;&gt;包的目录布局&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#安装-ik-analyzer&quot; id=&quot;markdown-toc-安装-ik-analyzer&quot;&gt;安装 ik-analyzer&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#安装&quot; id=&quot;markdown-toc-安装&quot;&gt;安装&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#重启服务&quot; id=&quot;markdown-toc-重启服务&quot;&gt;重启服务&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#测试&quot; id=&quot;markdown-toc-测试&quot;&gt;测试&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#测试不使用分词&quot; id=&quot;markdown-toc-测试不使用分词&quot;&gt;测试不使用分词&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#测试使用分词&quot; id=&quot;markdown-toc-测试使用分词&quot;&gt;测试使用分词&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&lt;em&gt;收集的好文链接(长期更新)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h1 id=&quot;安装java环境&quot;&gt;安装java环境&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;我们首先要配置java环境，这个需要Java8或者更新的包。一般执行以下命令时可以看看Java版本是否符合：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;default-jdk
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;安装elasticsearch&quot;&gt;安装Elasticsearch&lt;/h1&gt;

&lt;h2 id=&quot;安装公钥&quot;&gt;安装公钥&lt;/h2&gt;
&lt;p&gt;在安装之前我们需要下载和安装公钥，否则没有办法使用apt安装Elasticsearch。&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wget &lt;span class=&quot;nt&quot;&gt;-qO&lt;/span&gt; - https://artifacts.elastic.co/GPG-KEY-elasticsearch | &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-key add -
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;添加源&quot;&gt;添加源&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;apt-transport-https
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;deb https://artifacts.elastic.co/packages/6.x/apt stable main&quot;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;sudo tee&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; /etc/apt/sources.list.d/elastic-6.x.list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;安装es&quot;&gt;安装es&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get update &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;elasticsearch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;这样就安装好了。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;命令管理&quot;&gt;命令管理&lt;/h2&gt;

&lt;h3 id=&quot;systemd&quot;&gt;systemd&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;设置开机启动：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl daemon-reload
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;elasticsearch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;启动&quot;&gt;启动&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl start elasticsearch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;关闭&quot;&gt;关闭&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl stop elasticsearch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;端口与查看&quot;&gt;端口与查看&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;netstat &lt;span class=&quot;nt&quot;&gt;-plntu&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;访问试下&quot;&gt;访问试下&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-XGET&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'127.0.0.1:9200/?pretty'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;如果返回的数据如下所示，即表示安装成功了：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
  &quot;name&quot; : &quot;fi_nt2e&quot;,
  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,
  &quot;cluster_uuid&quot; : &quot;mO1Ly_8YSnWm1gYNPIL-MA&quot;,
  &quot;version&quot; : {
    &quot;number&quot; : &quot;6.8.6&quot;,
    &quot;build_flavor&quot; : &quot;default&quot;,
    &quot;build_type&quot; : &quot;deb&quot;,
    &quot;build_hash&quot; : &quot;3d9f765&quot;,
    &quot;build_date&quot; : &quot;2019-12-13T17:11:52.013738Z&quot;,
    &quot;build_snapshot&quot; : false,
    &quot;lucene_version&quot; : &quot;7.7.2&quot;,
    &quot;minimum_wire_compatibility_version&quot; : &quot;5.6.0&quot;,
    &quot;minimum_index_compatibility_version&quot; : &quot;5.0.0&quot;
  },
  &quot;tagline&quot; : &quot;You Know, for Search&quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：Elasticsearch需要启动一会。如果启动完成立马执行上面的命令，可以会提示拒绝连接，多试几次就好了。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;配置-elasticsearch&quot;&gt;配置 Elasticsearch&lt;/h2&gt;

&lt;h3 id=&quot;配置参数&quot;&gt;配置参数&lt;/h3&gt;
&lt;blockquote&gt;
  &lt;p&gt;Elasticsearch 默认情况下从 /etc/elasticsearch/elasticsearch.yml 文件中加载它的配置。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;RPM也又一个系统配置文件（/etc/sysconfig/elasticsearch），它允许你设置以下参数：&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;参数&lt;/th&gt;
      &lt;th&gt;解释&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;JAVA_HOME&lt;/td&gt;
      &lt;td&gt;设置要使用的自定义Java路径&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MAX_OPEN_FILES&lt;/td&gt;
      &lt;td&gt;打开文件的最大数量，默认65536&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MAX_LOCKED_MEMORY&lt;/td&gt;
      &lt;td&gt;最大锁内存大小。如果你在elasticsearch.yml中使用bootstrap.memory_lock选项，请设置unlimited&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MAX_MAP_COUNT&lt;/td&gt;
      &lt;td&gt;进程可能拥有的内存映射区域的最大值。如果使用 mmapfs 作为索引存储类型，请确认将其设置为较高的值。请检查linux内核文档关于max_map_count的更多信息。这是在elasticsearch启动之前通过sysctl设置的。默认是262144&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ES_PATH_CONF&lt;/td&gt;
      &lt;td&gt;配置文件目录（需要包含elasticsearch.yml和log4j2.properties文件），默认路径是：/etc/elasticsearch&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ES_JAVA_OPTS&lt;/td&gt;
      &lt;td&gt;Any additional JVM system properties you may want to apply.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;RESTART_ON_UPGRADE&lt;/td&gt;
      &lt;td&gt;配置软件包升级时将会重新启动，默认是false。这意味着你在安装软件包之后手动重启elasticsearch实例。这样做的原因是为了保障, 在集群中更新时，在高流量网络和减少你集群的响应时间的情况下导致分片的重新分配。&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;包的目录布局&quot;&gt;包的目录布局&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;类型&lt;/th&gt;
      &lt;th&gt;描述&lt;/th&gt;
      &lt;th&gt;默认路径&lt;/th&gt;
      &lt;th&gt;设置&lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;home&lt;/td&gt;
      &lt;td&gt;Elasticsearch家目录或者$ES_HOME&lt;/td&gt;
      &lt;td&gt;/usr/share/elasticsearch&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;bin&lt;/td&gt;
      &lt;td&gt;二进制脚本，包括elasticsearch去启动一个节点和elasticsearch-plugin安装插件&lt;/td&gt;
      &lt;td&gt;/etc/elasticsearch&lt;/td&gt;
      &lt;td&gt;conf&lt;/td&gt;
      &lt;td&gt;配置文件，包含elasticsearch.yml&lt;/td&gt;
      &lt;td&gt;/etc/elasticsearch&lt;/td&gt;
      &lt;td&gt;ES_PATH_CONF&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;conf&lt;/td&gt;
      &lt;td&gt;环境变量，包含 heap 大小，文件描述符。&lt;/td&gt;
      &lt;td&gt;/etc/default/elasticsearch&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;data&lt;/td&gt;
      &lt;td&gt;在节点上分配的每个索引/分片的数据文件的位置。可以容纳多个位置。&lt;/td&gt;
      &lt;td&gt;/var/lib/elasticsearch&lt;/td&gt;
      &lt;td&gt;path.data&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;logs&lt;/td&gt;
      &lt;td&gt;日志文件位置。&lt;/td&gt;
      &lt;td&gt;/var/log/elasticsearch&lt;/td&gt;
      &lt;td&gt;path.logs&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;plugins&lt;/td&gt;
      &lt;td&gt;插件文件位置. 每个插件将包含在一个子目录中.&lt;/td&gt;
      &lt;td&gt;/usr/share/elasticsearch/plugins&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;repo&lt;/td&gt;
      &lt;td&gt;共享文件系统存储库位置。可以容纳多个位置。文件系统存储库可以放置在指定目录中任何子目录中。&lt;/td&gt;
      &lt;td&gt;Not configured&lt;/td&gt;
      &lt;td&gt;path.repo&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&quot;安装-ik-analyzer&quot;&gt;安装 ik-analyzer&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意这里一定要选择和你的es版本匹配的ik版本&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;安装&quot;&gt;安装&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/usr/share/elasticsearch/bin/elasticsearch-plugin &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.8.6/elasticsearch-analysis-ik-6.8.6.zip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;我的安装过程如下&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@JD:/etc/nginx/sites-available# /usr/share/elasticsearch/bin/elasticsearch-plugin &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.8.6/elasticsearch-analysis-ik-6.8.6.zip
warning: Falling back to java on path. This behavior is deprecated. Specify JAVA_HOME
-&amp;gt; Downloading https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.8.6/elasticsearch-analysis-ik-6.8.6.zip
&lt;span class=&quot;o&quot;&gt;[=================================================]&lt;/span&gt; 100%   
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@     WARNING: plugin requires additional permissions     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; java.net.SocketPermission &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; connect,resolve
See http://docs.oracle.com/javase/8/docs/technotes/guides/security/permissions.html
&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;descriptions of what these permissions allow and the associated risks.

Continue with installation? &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;y/N]y
-&amp;gt; Installed analysis-ik
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;出现以上显示 表示安装成功&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;重启服务&quot;&gt;重启服务&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl restart elasticsearch  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;重启之后要等待一下&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;测试&quot;&gt;测试&lt;/h2&gt;

&lt;h3 id=&quot;测试不使用分词&quot;&gt;测试不使用分词&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@JD:/var/www/bbs# curl &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Content-Type: application/json'&lt;/span&gt;  &lt;span class=&quot;nt&quot;&gt;-XGET&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'localhost:9200/_analyze?pretty'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'{&quot;text&quot;:&quot;北京欢迎你&quot;}'&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;tokens&quot;&lt;/span&gt; : &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;token&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;北&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;start_offset&quot;&lt;/span&gt; : 0,
      &lt;span class=&quot;s2&quot;&gt;&quot;end_offset&quot;&lt;/span&gt; : 1,
      &lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;IDEOGRAPHIC&amp;gt;&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;position&quot;&lt;/span&gt; : 0
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;token&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;京&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;start_offset&quot;&lt;/span&gt; : 1,
      &lt;span class=&quot;s2&quot;&gt;&quot;end_offset&quot;&lt;/span&gt; : 2,
      &lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;IDEOGRAPHIC&amp;gt;&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;position&quot;&lt;/span&gt; : 1
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;token&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;欢&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;start_offset&quot;&lt;/span&gt; : 2,
      &lt;span class=&quot;s2&quot;&gt;&quot;end_offset&quot;&lt;/span&gt; : 3,
      &lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;IDEOGRAPHIC&amp;gt;&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;position&quot;&lt;/span&gt; : 2
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;token&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;迎&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;start_offset&quot;&lt;/span&gt; : 3,
      &lt;span class=&quot;s2&quot;&gt;&quot;end_offset&quot;&lt;/span&gt; : 4,
      &lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;IDEOGRAPHIC&amp;gt;&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;position&quot;&lt;/span&gt; : 3
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;token&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;你&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;start_offset&quot;&lt;/span&gt; : 4,
      &lt;span class=&quot;s2&quot;&gt;&quot;end_offset&quot;&lt;/span&gt; : 5,
      &lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;IDEOGRAPHIC&amp;gt;&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;position&quot;&lt;/span&gt; : 4
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;测试使用分词&quot;&gt;测试使用分词&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@JD:/var/www/bbs# curl &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Content-Type: application/json'&lt;/span&gt;  &lt;span class=&quot;nt&quot;&gt;-XGET&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'localhost:9200/_analyze?pretty'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'{&quot;analyzer&quot;:&quot;ik_max_word&quot;,&quot;text&quot;:&quot;北京欢迎你&quot;}'&lt;/span&gt;  
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;tokens&quot;&lt;/span&gt; : &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;token&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;北京&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;start_offset&quot;&lt;/span&gt; : 0,
      &lt;span class=&quot;s2&quot;&gt;&quot;end_offset&quot;&lt;/span&gt; : 2,
      &lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;CN_WORD&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;position&quot;&lt;/span&gt; : 0
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;token&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;欢迎&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;start_offset&quot;&lt;/span&gt; : 2,
      &lt;span class=&quot;s2&quot;&gt;&quot;end_offset&quot;&lt;/span&gt; : 4,
      &lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;CN_WORD&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;position&quot;&lt;/span&gt; : 1
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;token&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;你&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;start_offset&quot;&lt;/span&gt; : 4,
      &lt;span class=&quot;s2&quot;&gt;&quot;end_offset&quot;&lt;/span&gt; : 5,
      &lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;CN_CHAR&quot;&lt;/span&gt;,
      &lt;span class=&quot;s2&quot;&gt;&quot;position&quot;&lt;/span&gt; : 2
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Fri, 27 Dec 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019-12-27-ubuntu-%E5%AE%89%E8%A3%85-elasticsearch%E5%92%8Cik-analyzer%E4%B8%AD%E6%96%87%E5%88%86%E8%AF%8D.html</link>
        <guid isPermaLink="true">http://localhost:4000/2019-12-27-ubuntu-%E5%AE%89%E8%A3%85-elasticsearch%E5%92%8Cik-analyzer%E4%B8%AD%E6%96%87%E5%88%86%E8%AF%8D.html</guid>
        
        <category>ubuntu</category>
        
        <category>elasticsearch</category>
        
        <category>ik-analyzer</category>
        
        
        <category>Server</category>
        
      </item>
    
      <item>
        <title>收集的好文链接(长期更新)</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1支付类&quot; id=&quot;markdown-toc-1支付类&quot;&gt;1.支付类&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#1-1新微信服务号微信小程序微信支付支付宝支付-&quot; id=&quot;markdown-toc-1-1新微信服务号微信小程序微信支付支付宝支付-&quot;&gt;1-1.【新】微信服务号+微信小程序+微信支付+支付宝支付 &lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2工具类&quot; id=&quot;markdown-toc-2工具类&quot;&gt;2.工具类&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#2-1postman的免费快速美观的替代方案postwoman&quot; id=&quot;markdown-toc-2-1postman的免费快速美观的替代方案postwoman&quot;&gt;2-1.Postman的免费，快速，美观的替代方案——Postwoman&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#2-2正版phpstorm免费激活步骤图文详解&quot; id=&quot;markdown-toc-2-2正版phpstorm免费激活步骤图文详解&quot;&gt;2-2.正版phpstorm免费激活步骤（图文详解&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#2-3swoft基于-swoole-原生协程的新时代-php-高性能协程全栈框架&quot; id=&quot;markdown-toc-2-3swoft基于-swoole-原生协程的新时代-php-高性能协程全栈框架&quot;&gt;2-3.Swoft(基于 Swoole 原生协程的新时代 PHP 高性能协程全栈框架)&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#2-4一个基于-mysql-协议swoole-开发的mysql数据库连接池&quot; id=&quot;markdown-toc-2-4一个基于-mysql-协议swoole-开发的mysql数据库连接池&quot;&gt;2-4.一个基于 MySQL 协议，Swoole 开发的MySQL数据库连接池。&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3laravel相关&quot; id=&quot;markdown-toc-3laravel相关&quot;&gt;3.laravel相关&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#3-1laravel--swoole--adminlte-效率开发模板&quot; id=&quot;markdown-toc-3-1laravel--swoole--adminlte-效率开发模板&quot;&gt;3-1.laravel + swoole + adminlte 效率开发模板&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4运维相关&quot; id=&quot;markdown-toc-4运维相关&quot;&gt;4.运维相关&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#4-1start-docker-lnmp&quot; id=&quot;markdown-toc-4-1start-docker-lnmp&quot;&gt;4-1.Start Docker LNMP&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#4-2docker-lnmp-docs&quot; id=&quot;markdown-toc-4-2docker-lnmp-docs&quot;&gt;4-2.Docker LNMP Docs&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#4-3laradock&quot; id=&quot;markdown-toc-4-3laradock&quot;&gt;4-3.laradock&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#4-4laradock_doc&quot; id=&quot;markdown-toc-4-4laradock_doc&quot;&gt;4-4.laradock_doc&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#4-5轻松部署-laravel-应用&quot; id=&quot;markdown-toc-4-5轻松部署-laravel-应用&quot;&gt;4-5.轻松部署 Laravel 应用&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-权限管理相关&quot; id=&quot;markdown-toc-5-权限管理相关&quot;&gt;5. 权限管理相关&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#5-1开始使用casbin&quot; id=&quot;markdown-toc-5-1开始使用casbin&quot;&gt;5-1.开始使用Casbin&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&lt;em&gt;收集的好文链接(长期更新)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;1支付类&quot;&gt;1.支付类&lt;/h2&gt;

&lt;h3 id=&quot;1-1新微信服务号微信小程序微信支付支付宝支付-&quot;&gt;1-1.&lt;a href=&quot;https://github.com/zoujingli/WeChatDeveloper&quot;&gt;【新】微信服务号+微信小程序+微信支付+支付宝支付 &lt;/a&gt;&lt;/h3&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;2工具类&quot;&gt;2.工具类&lt;/h2&gt;

&lt;h3 id=&quot;2-1postman的免费快速美观的替代方案postwoman&quot;&gt;2-1.&lt;a href=&quot;https://postwoman.io/&quot;&gt;Postman的免费，快速，美观的替代方案——Postwoman&lt;/a&gt;&lt;/h3&gt;

&lt;h3 id=&quot;2-2正版phpstorm免费激活步骤图文详解&quot;&gt;2-2.&lt;a href=&quot;https://www.php.cn/tool/phpstorm/408348.html&quot;&gt;正版phpstorm免费激活步骤（图文详解&lt;/a&gt;&lt;/h3&gt;

&lt;h3 id=&quot;2-3swoft基于-swoole-原生协程的新时代-php-高性能协程全栈框架&quot;&gt;2-3.&lt;a href=&quot;https://www.swoft.org/&quot;&gt;Swoft(基于 Swoole 原生协程的新时代 PHP 高性能协程全栈框架)&lt;/a&gt;&lt;/h3&gt;

&lt;h3 id=&quot;2-4一个基于-mysql-协议swoole-开发的mysql数据库连接池&quot;&gt;2-4.&lt;a href=&quot;https://smproxy.louislivi.com/#/README&quot;&gt;一个基于 MySQL 协议，Swoole 开发的MySQL数据库连接池。&lt;/a&gt;&lt;/h3&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;3laravel相关&quot;&gt;3.laravel相关&lt;/h2&gt;

&lt;h3 id=&quot;3-1laravel--swoole--adminlte-效率开发模板&quot;&gt;3-1.&lt;a href=&quot;https://github.com/cranux/laravelDevelopmentTemplate&quot;&gt;laravel + swoole + adminlte 效率开发模板&lt;/a&gt;&lt;/h3&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;4运维相关&quot;&gt;4.运维相关&lt;/h2&gt;

&lt;h3 id=&quot;4-1start-docker-lnmp&quot;&gt;4-1.&lt;a href=&quot;https://github.com/khs1994-docker/lnmp/blob/master/README.cn.md&quot;&gt;Start Docker LNMP&lt;/a&gt;&lt;/h3&gt;

&lt;h3 id=&quot;4-2docker-lnmp-docs&quot;&gt;4-2.&lt;a href=&quot;https://docs.lnmp.khs1994.com/#%E5%BE%AE%E4%BF%A1%E8%AE%A2%E9%98%85%E5%8F%B7&quot;&gt;Docker LNMP Docs&lt;/a&gt;&lt;/h3&gt;

&lt;h3 id=&quot;4-3laradock&quot;&gt;4-3.&lt;a href=&quot;https://github.com/laradock/laradock&quot;&gt;laradock&lt;/a&gt;&lt;/h3&gt;

&lt;h3 id=&quot;4-4laradock_doc&quot;&gt;4-4.&lt;a href=&quot;https://laradock-docs.linganmin.cn/zh/getting-started/#%E8%A6%81%E6%B1%82&quot;&gt;laradock_doc&lt;/a&gt;&lt;/h3&gt;

&lt;h3 id=&quot;4-5轻松部署-laravel-应用&quot;&gt;4-5.&lt;a href=&quot;https://github.com/wi1dcard/laravel-deployment&quot;&gt;轻松部署 Laravel 应用&lt;/a&gt;&lt;/h3&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;5-权限管理相关&quot;&gt;5. 权限管理相关&lt;/h2&gt;

&lt;h3 id=&quot;5-1开始使用casbin&quot;&gt;5-1.&lt;a href=&quot;https://casbin.org/docs/zh-CN/get-started&quot;&gt;开始使用Casbin&lt;/a&gt;&lt;/h3&gt;

&lt;hr /&gt;

</description>
        <pubDate>Thu, 26 Dec 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019-12-26-%E6%94%B6%E8%97%8F%E7%9A%84%E5%A5%BD%E6%96%87%E9%93%BE%E6%8E%A5(%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0).html</link>
        <guid isPermaLink="true">http://localhost:4000/2019-12-26-%E6%94%B6%E8%97%8F%E7%9A%84%E5%A5%BD%E6%96%87%E9%93%BE%E6%8E%A5(%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0).html</guid>
        
        <category>好文收藏</category>
        
        
        <category>Tool</category>
        
      </item>
    
      <item>
        <title>Ubuntu18.04 搭建 PHP 环境</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1初始化系统&quot; id=&quot;markdown-toc-1初始化系统&quot;&gt;1.初始化系统&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#实验环境&quot; id=&quot;markdown-toc-实验环境&quot;&gt;实验环境&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#更新软件源&quot; id=&quot;markdown-toc-更新软件源&quot;&gt;更新软件源&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#本地化配置&quot; id=&quot;markdown-toc-本地化配置&quot;&gt;本地化配置&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2安装-nginx&quot; id=&quot;markdown-toc-2安装-nginx&quot;&gt;2.安装 Nginx&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#通过apt安装-nginx&quot; id=&quot;markdown-toc-通过apt安装-nginx&quot;&gt;通过apt安装 Nginx&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#管理-nginx-服务&quot; id=&quot;markdown-toc-管理-nginx-服务&quot;&gt;管理 Nginx 服务&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#确认-nginx-正常运行&quot; id=&quot;markdown-toc-确认-nginx-正常运行&quot;&gt;确认 Nginx 正常运行&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3安装-php-fpm&quot; id=&quot;markdown-toc-3安装-php-fpm&quot;&gt;3.安装 PHP-FPM&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#配置第三方软件源&quot; id=&quot;markdown-toc-配置第三方软件源&quot;&gt;配置第三方软件源&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#安装-php&quot; id=&quot;markdown-toc-安装-php&quot;&gt;安装 PHP&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#管理-php-fpm-服务&quot; id=&quot;markdown-toc-管理-php-fpm-服务&quot;&gt;管理 PHP-FPM 服务&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#确认-php-fpm-正常运行&quot; id=&quot;markdown-toc-确认-php-fpm-正常运行&quot;&gt;确认 PHP-FPM 正常运行&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4composer&quot; id=&quot;markdown-toc-4composer&quot;&gt;4.Composer&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#安装-composer&quot; id=&quot;markdown-toc-安装-composer&quot;&gt;安装 Composer&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#第一种方式&quot; id=&quot;markdown-toc-第一种方式&quot;&gt;第一种方式&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#第二种方式&quot; id=&quot;markdown-toc-第二种方式&quot;&gt;第二种方式&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#第三种方式&quot; id=&quot;markdown-toc-第三种方式&quot;&gt;第三种方式&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#配置-packagist-中国镜像&quot; id=&quot;markdown-toc-配置-packagist-中国镜像&quot;&gt;配置 Packagist 中国镜像&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5部署应用代码&quot; id=&quot;markdown-toc-5部署应用代码&quot;&gt;5.部署应用代码&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#创建一个新项目&quot; id=&quot;markdown-toc-创建一个新项目&quot;&gt;创建一个新项目&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#配置文件所有者&quot; id=&quot;markdown-toc-配置文件所有者&quot;&gt;配置文件所有者&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6配置-nginx-站点&quot; id=&quot;markdown-toc-6配置-nginx-站点&quot;&gt;6.配置 Nginx 站点&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#nginx-站点配置&quot; id=&quot;markdown-toc-nginx-站点配置&quot;&gt;Nginx 站点配置&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#fastcgi-服务地址为-ip端口时的配置&quot; id=&quot;markdown-toc-fastcgi-服务地址为-ip端口时的配置&quot;&gt;FastCGI 服务地址为 IP:端口时的配置&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#首先修改php的配置文件&quot; id=&quot;markdown-toc-首先修改php的配置文件&quot;&gt;首先修改php的配置文件&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#配置一&quot; id=&quot;markdown-toc-配置一&quot;&gt;配置一&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#配置二&quot; id=&quot;markdown-toc-配置二&quot;&gt;配置二&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#注意&quot; id=&quot;markdown-toc-注意&quot;&gt;注意&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#重载-nginx&quot; id=&quot;markdown-toc-重载-nginx&quot;&gt;重载 Nginx&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#最终效果&quot; id=&quot;markdown-toc-最终效果&quot;&gt;最终效果&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7安装mysql&quot; id=&quot;markdown-toc-7安装mysql&quot;&gt;7.安装MYSQL&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#通过apt安装mysql&quot; id=&quot;markdown-toc-通过apt安装mysql&quot;&gt;通过apt安装mysql&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#管理-mysql-服务&quot; id=&quot;markdown-toc-管理-mysql-服务&quot;&gt;管理 Mysql 服务&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#测试&quot; id=&quot;markdown-toc-测试&quot;&gt;测试&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#mysql-创建新用户&quot; id=&quot;markdown-toc-mysql-创建新用户&quot;&gt;mysql 创建新用户&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#创建一个所有权用户&quot; id=&quot;markdown-toc-创建一个所有权用户&quot;&gt;创建一个所有权用户&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#创建一个条件限制用户&quot; id=&quot;markdown-toc-创建一个条件限制用户&quot;&gt;创建一个条件限制用户&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#注意-1&quot; id=&quot;markdown-toc-注意-1&quot;&gt;注意&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#设置允许外网访问&quot; id=&quot;markdown-toc-设置允许外网访问&quot;&gt;设置允许外网访问&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#测试-1&quot; id=&quot;markdown-toc-测试-1&quot;&gt;测试&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#8生产环境的必要优化&quot; id=&quot;markdown-toc-8生产环境的必要优化&quot;&gt;8.生产环境的必要优化&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#nginx-配置&quot; id=&quot;markdown-toc-nginx-配置&quot;&gt;Nginx 配置&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#laravel-的配置缓存与路由缓存&quot; id=&quot;markdown-toc-laravel-的配置缓存与路由缓存&quot;&gt;Laravel 的配置缓存与路由缓存&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#composer&quot; id=&quot;markdown-toc-composer&quot;&gt;Composer&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#再谈文件权限&quot; id=&quot;markdown-toc-再谈文件权限&quot;&gt;再谈文件权限&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#杂项&quot; id=&quot;markdown-toc-杂项&quot;&gt;杂项&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&lt;em&gt;Ubuntu18.04 搭建 PHP 环境&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h1 id=&quot;1初始化系统&quot;&gt;1.初始化系统&lt;/h1&gt;

&lt;h2 id=&quot;实验环境&quot;&gt;实验环境&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;我们基于一台全新的 Ubuntu  18.04 LTS 服务器&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;更新软件源&quot;&gt;更新软件源&lt;/h2&gt;

&lt;p&gt;登录到服务器，我们首先要做的就是更新软件源：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;apt update
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：这里所说的「更新软件源」并非升级软件，在中文内更加准确的描述应当是 &lt;strong&gt;刷新软件源&lt;/strong&gt;。在这个过程中，包管理器（也就是 APT，可以理解为「软件管家」之类）将会从 &lt;strong&gt;软件源&lt;/strong&gt; 服务器上获取一份最新的包列表并建立本地缓存，包括软件名称、描述、最新版本、下载地址等等。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;你将会看到类似这样的输出：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@JD:~# apt update
Hit:1 http://mirrors.jdcloudcs.com/ubuntu bionic InRelease
Hit:2 http://mirrors.jdcloudcs.com/ubuntu bionic-updates InRelease
Hit:3 http://mirrors.jdcloudcs.com/ubuntu bionic-backports InRelease
Hit:4 http://mirrors.jdcloudcs.com/ubuntu bionic-security InRelease
Reading package lists... Done
Building dependency tree       
Reading state information... Done
112 packages can be upgraded. Run &lt;span class=&quot;s1&quot;&gt;'apt list --upgradable'&lt;/span&gt; to see them.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;最后一行有这样的提示：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;112 packages can be upgraded. Run 'apt list --upgradable' to see them.

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;意为有 112 个软件包可升级，执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;apt list --upgradable&lt;/code&gt; 命令来查看它们。&lt;/p&gt;

&lt;p&gt;我们暂且忽略，直接升级：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ apt upgrade
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：生产环境下，更新任何软件包前都需要仔细检查，确保更新日志内没有影响现有环境的改动。另外，你也可以先不升级，对后续部署基本没有影响。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;你将会看到一大坨（是的，一坨）输出，它们是将被升级的软件列表；注意关注最后几行：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;112 upgraded, 5 newly installed, 0 to remove and 0 not upgraded.
Need to get 196 MB of archives.
After this operation, 348 MB of additional disk space will be used.
Do you want to continue? [Y/n] 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;意为此操作将占用 348 MB 磁盘空间。此时输入 &lt;code class=&quot;highlighter-rouge&quot;&gt;Y&lt;/code&gt;（注意关闭中文输入法），或直接回车即可开始升级。主流云服务厂商均有缓存软件源，数据流量是通过内网传输，所以该过程不会太慢。&lt;/p&gt;

&lt;h2 id=&quot;本地化配置&quot;&gt;本地化配置&lt;/h2&gt;

&lt;p&gt;所谓「本地化配置」，可理解为系统时区、单位、地址、语言等配置的统称。使其能够符合某一地区的习惯。虽然我们的母语是中文，但还是建议将服务器配置为英语，尽可能避免奇葩乱码等问题带来的影响。&lt;/p&gt;

&lt;p&gt;首先，执行以下命令生成美国本地化数据：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;locale-gen en_US.UTF-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;随后将本地化配置修改为 &lt;code class=&quot;highlighter-rouge&quot;&gt;en_US.UTF-8&lt;/code&gt; 即可：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;update-locale &lt;span class=&quot;nv&quot;&gt;LC_ALL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果服务器在国外，则服务商可能不会将其配置为东八区；我们还需手动修改时区为 &lt;code class=&quot;highlighter-rouge&quot;&gt;Asia/Shanghai&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;timedatectl set-timezone Asia/Shanghai
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;若你是在国内云服务商租用的服务器，那么极有可能时区已经配置好了。&lt;/p&gt;

&lt;p&gt;至此，系统初始化阶段完成。&lt;/p&gt;

&lt;h1 id=&quot;2安装-nginx&quot;&gt;2.安装 Nginx&lt;/h1&gt;

&lt;p&gt;上节我们刚刚完成一些基础的初始化工作；接下来，可以开始安装软件包了。在本课程内，我将使用大名鼎鼎的 Nginx 作为 Web 服务。&lt;/p&gt;

&lt;h2 id=&quot;通过apt安装-nginx&quot;&gt;通过apt安装 Nginx&lt;/h2&gt;

&lt;p&gt;由于我们执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;apt update&lt;/code&gt; 更新软件源不久，所以直接安装 Nginx 即可：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;再次收到确认提示：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;0 upgraded, 18 newly installed, 0 to remove and 0 not upgraded.
Need to get 2,461 kB of archives.
After this operation, 8,210 kB of additional disk space will be used.
Do you want to continue? [Y/n] 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;上节为大家介绍过输入 &lt;code class=&quot;highlighter-rouge&quot;&gt;Y&lt;/code&gt; 或直接回车均可继续，也就是说此处的询问默认结果为 &lt;code class=&quot;highlighter-rouge&quot;&gt;Y&lt;/code&gt;。有个普遍共识是，在提供选项供用户选择时，以大写项为默认值。例如此处的 &lt;code class=&quot;highlighter-rouge&quot;&gt;[Y/n]&lt;/code&gt; 那么 &lt;code class=&quot;highlighter-rouge&quot;&gt;Y&lt;/code&gt; 即为默认值；同理，若是 &lt;code class=&quot;highlighter-rouge&quot;&gt;[a/b/c/D/e]&lt;/code&gt;，那么 &lt;code class=&quot;highlighter-rouge&quot;&gt;D&lt;/code&gt; 即为默认值。&lt;/p&gt;

&lt;p&gt;另外，上节介绍了更新软件源即为包管理器从软件源服务器拉取软件包列表并建立本地缓存。其实，当我们执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;apt install&lt;/code&gt; 操作时，包管理器便会从本地缓存中找到该软件包的指定版本，并进行下载、安装。&lt;/p&gt;

&lt;p&gt;稍等几秒钟即可安装成功：&lt;/p&gt;

&lt;h2 id=&quot;管理-nginx-服务&quot;&gt;管理 Nginx 服务&lt;/h2&gt;

&lt;p&gt;我们可使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;service&lt;/code&gt; 命令管理服务状态，常用操作如下：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service nginx start &lt;span class=&quot;c&quot;&gt;# 启动 Nginx&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service nginx stop &lt;span class=&quot;c&quot;&gt;# 停止 Nginx&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service nginx restart &lt;span class=&quot;c&quot;&gt;# 重启 Nginx&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;同时，可使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl&lt;/code&gt; 命令开关服务的开机自启：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;nginx &lt;span class=&quot;c&quot;&gt;# 启用 Nginx 开机启动&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl disable nginx &lt;span class=&quot;c&quot;&gt;# 禁用 Nginx 开机启动&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：通常情况下，在 APT 安装后已默认启用 Nginx 开机启动。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;确认-nginx-正常运行&quot;&gt;确认 Nginx 正常运行&lt;/h2&gt;

&lt;p&gt;在浏览器内输入服务器公网 IP（或域名）并打开，出现默认欢迎页面说明 Nginx 已经正常运行：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/lnmp/lnmp_nginx.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;恭喜，Nginx 安装成功。&lt;/p&gt;

&lt;h1 id=&quot;3安装-php-fpm&quot;&gt;3.安装 PHP-FPM&lt;/h1&gt;

&lt;p&gt;安装 PHP 7.3。&lt;/p&gt;

&lt;h2 id=&quot;配置第三方软件源&quot;&gt;配置第三方软件源&lt;/h2&gt;

&lt;p&gt;由于 Ubuntu 的官方软件源通常不包含最新版本的 PHP，因此需要添加一个包含最新 PHP 的第三方软件源。&lt;/p&gt;

&lt;p&gt;在添加之前，我们首先安装名为 &lt;code class=&quot;highlighter-rouge&quot;&gt;software-properties-common&lt;/code&gt; 的软件包，它提供了快速管理软件源的实用脚本：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; software-properties-common
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;相比之前执行的 &lt;code class=&quot;highlighter-rouge&quot;&gt;apt install&lt;/code&gt; 命令，这次我添加了 &lt;code class=&quot;highlighter-rouge&quot;&gt;-y&lt;/code&gt; 选项，表示当 APT 遇到询问时默认确认，避免再次输入 &lt;code class=&quot;highlighter-rouge&quot;&gt;Y&lt;/code&gt; 并回车。&lt;/p&gt;

&lt;p&gt;随后，执行以下脚本添加第三方 PHP 软件源：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;add-apt-repository &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; ppa:ondrej/php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;成功后别忘记刷新：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;apt-get update
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;安装-php&quot;&gt;安装 PHP&lt;/h2&gt;

&lt;p&gt;PHP 的安装实际上分为三个软件包：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;PHP - PHP 自身。&lt;/li&gt;
  &lt;li&gt;PHP-CLI - PHP 的命令行接口，通俗地说，在命令行内执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;php&lt;/code&gt; 便依赖于此包。&lt;/li&gt;
  &lt;li&gt;PHP-FPM - 全称为 &lt;code class=&quot;highlighter-rouge&quot;&gt;PHP FastCGI Process Manager&lt;/code&gt;，用于管理 PHP 进程，并提供 FastCGI 接口与 Nginx 交互；浏览网页时的请求便是由 Nginx 交由 PHP-FPM 处理的。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt install&lt;/code&gt; 支持多参数，所以我们不必执行多次安装，只需在单条命令内写明多个软件包即可：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; php7.3 php7.3-cli php7.3-fpm php7.3-dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;按照 &lt;a href=&quot;https://laravel.com/docs/6.x/installation#installation&quot;&gt;Laravel安装文档&lt;/a&gt; 的说明，接着安装几个必备的 PHP 扩展：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; php7.3-mbstring php7.3-xml php7.3-bcmath
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：由于 PDO 等扩展已经内置在 PHP 中，故无需额外安装。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;对于不同项目的不同依赖，可能有必要安装以下扩展，根据实际情况选择即可：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;php7.3-curl php7.3-gd php7.3-mysql php7.3-opcache php7.3-zip php7.3-sqlite3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;有个小技巧是，你可以通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;apt-cache&lt;/code&gt; 命令来搜索当前软件源内的包：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;apt-cache search php7.3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;例如以上命令，将会得到所有名称、描述等信息内包含 &lt;code class=&quot;highlighter-rouge&quot;&gt;php7.3&lt;/code&gt; 字样的软件包：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;php-amqp - AMQP extension for PHP
php-apcu - APC User Cache for PHP
php-geoip - GeoIP module for PHP
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;管理-php-fpm-服务&quot;&gt;管理 PHP-FPM 服务&lt;/h2&gt;

&lt;p&gt;与管理 Nginx 服务类似，你同样可以通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;service&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl&lt;/code&gt; 命令管理 PHP-FPM 服务：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service php7.3-fpm restart &lt;span class=&quot;c&quot;&gt;# 重启 PHP-FPM&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service php7.3-fpm start &lt;span class=&quot;c&quot;&gt;# 启动 PHP-FPM&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service php7.3-fpm stop &lt;span class=&quot;c&quot;&gt;# 停止 PHP-FPM&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;php7.3-fpm &lt;span class=&quot;c&quot;&gt;# 启用 PHP-FPM 开机启动&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl disable php7.3-fpm &lt;span class=&quot;c&quot;&gt;# 禁用 PHP-FPM 开机启动&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：不同版本的 PHP-FPM 服务名是不一致的。例如 7.2 为 &lt;code class=&quot;highlighter-rouge&quot;&gt;php7.2-fpm&lt;/code&gt;，7.3 为 &lt;code class=&quot;highlighter-rouge&quot;&gt;php7.3-fpm&lt;/code&gt;，以此类推……&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;确认-php-fpm-正常运行&quot;&gt;确认 PHP-FPM 正常运行&lt;/h2&gt;

&lt;p&gt;通过以下命令可确认 PHP-FPM 进程正在运行：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ps aux | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;其中：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ps aux&lt;/code&gt; 用于列出系统当前正在运行的所有进程的所有信息。&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;|&lt;/code&gt; 名为管道操作符，将前一条命令的标准输出连接到下一条命令的标准输入。&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;grep&lt;/code&gt; 是一款文本搜索工具，常用来过滤命令行输出；&lt;code class=&quot;highlighter-rouge&quot;&gt;php&lt;/code&gt; 是搜索的关键词。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ps&lt;/code&gt; 将进程信息输出到 &lt;code class=&quot;highlighter-rouge&quot;&gt;grep&lt;/code&gt; 进行过滤，后者筛选出包含 &lt;code class=&quot;highlighter-rouge&quot;&gt;php&lt;/code&gt; 字样的行，再将它们输出。于是，它们相结合，产生的效果便是这样：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-base&quot;&gt;root@JD:~# ps aux | grep php
root     24292  0.0  0.2 314952 20508 ?        Ss   11:35   0:00 php-fpm: master process (/etc/php/7.3/fpm/php-fpm.conf)
www-data 24318  0.0  0.1 317252  8652 ?        S    11:35   0:00 php-fpm: pool www
www-data 24319  0.0  0.1 317252  8652 ?        S    11:35   0:00 php-fpm: pool www
root     24391  0.0  0.0  13136  1048 pts/0    S+   11:36   0:00 grep --color=auto php
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;忽略最后一行（这是我们正在执行的 &lt;code class=&quot;highlighter-rouge&quot;&gt;grep&lt;/code&gt; 命令），可观察到有 &lt;code class=&quot;highlighter-rouge&quot;&gt;php-fpm&lt;/code&gt; 进程正在运行中。&lt;/p&gt;

&lt;p&gt;若 PHP-FPM 进程不存在，那么输出将只有孤零零的 &lt;code class=&quot;highlighter-rouge&quot;&gt;grep&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root     24391  0.0  0.0  13136  1048 pts/0    S+   11:36   0:00 grep --color=auto php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;提示：你可以结合上文提到的 &lt;code class=&quot;highlighter-rouge&quot;&gt;service&lt;/code&gt; 命令，将服务进程手动停止试试看；测试完毕不要忘记再次启动。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;4composer&quot;&gt;4.Composer&lt;/h1&gt;

&lt;p&gt;Composer 是部署 PHP 项目时必不可少的工具&lt;/p&gt;

&lt;h2 id=&quot;安装-composer&quot;&gt;安装 Composer&lt;/h2&gt;

&lt;p&gt;Composer 比较特殊，不能通过 APT 安装。虽然网络上流传着一大堆从第三方服务器直接下载 &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.phar&lt;/code&gt; 文件的安装方式，但根据 Composer 的官方文档，正确的安装姿势应当为：&lt;/p&gt;

&lt;h3 id=&quot;第一种方式&quot;&gt;第一种方式&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://getcomposer.org/download/&quot;&gt;参考链接&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;php &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;copy('https://getcomposer.org/installer', 'composer-setup.php');&quot;&lt;/span&gt;
php &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;if (hash_file('sha384', 'composer-setup.php') === 'baf1608c33254d00611ac1705c1d9958c817a1a33bce370c0595974b342601bd80b92a3f46067da89e3b06bff421f182') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;&quot;&lt;/span&gt;
php composer-setup.php
php &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;unlink('composer-setup.php');&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;第二种方式&quot;&gt;第二种方式&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.phpcomposer.com/00-intro.html#Globally&quot;&gt;参考链接&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; https://getcomposer.org/installer | php
&lt;span class=&quot;nb&quot;&gt;mv &lt;/span&gt;composer.phar /usr/local/bin/composer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;第三种方式&quot;&gt;第三种方式&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://getcomposer.org/doc/faqs/how-to-install-composer-programmatically.md&quot;&gt;参考链接&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wget https://raw.githubusercontent.com/composer/getcomposer.org/master/web/installer &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; - &lt;span class=&quot;nt&quot;&gt;-q&lt;/span&gt; | php &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;composer &lt;span class=&quot;nt&quot;&gt;--install-dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：通过第三方服务器、直接下载 &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.phar&lt;/code&gt; 不进行任何检查，均无法保证 Composer 正常运行，且存在安全风险！请务必遵循官方文档内的说明。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;稍等片刻，将会出现以下输出：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;All settings correct for using Composer
Downloading...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;这里最好按照第二种方式  执行 mv composer.phar /usr/local/bin/composer
然后可以在任何地方执行composer了&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;提示当前环境检查通过，可正常使用 Composer；随后开始下载。&lt;/p&gt;

&lt;p&gt;鉴于众所周知的原因，大陆访问国际网络速度奇慢无比，请耐心等待。当出现以下提示时，表示已经安装成功：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Composer (version 1.9.1) successfully installed to: /root/composer.phar
Use it: php composer.phar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;按照提示，我们可以使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/bin/composer&lt;/code&gt; 运行 Composer，当然，还有个更简单的方法：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mv &lt;/span&gt;composer.phar /usr/local/bin/composer
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;composer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;你可能会收到这样一条警告：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Do not run Composer as root/super user! See https://getcomposer.org/root &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;details
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;意为请勿使用根用户运行 Composer；暂时不必关心它，我将在后续课程中详细说明。&lt;/p&gt;

&lt;h2 id=&quot;配置-packagist-中国镜像&quot;&gt;配置 Packagist 中国镜像&lt;/h2&gt;

&lt;p&gt;这一步是可选的。如果你的服务器位于大陆，强烈建议使用可信赖的代理，或是国内 Packagist 镜像。&lt;/p&gt;

&lt;p&gt;推荐使用阿里云提供的 &lt;a href=&quot;https://developer.aliyun.com/composer&quot;&gt;Packagist 中国镜像&lt;/a&gt;，执行以下命令即可切换服务器内 Composer 的默认 Packagist 源：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;composer config &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; repo.packagist composer https://mirrors.aliyun.com/composer/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;5部署应用代码&quot;&gt;5.部署应用代码&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;这里以laravel项目为例&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;创建一个新项目&quot;&gt;创建一个新项目&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://laravel.com/docs/6.x/installation#installation&quot;&gt;laravel官网&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /var/www/
composer create-project &lt;span class=&quot;nt&quot;&gt;--prefer-dist&lt;/span&gt; laravel/laravel blog
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;若提示是没有zip扩展  那么请首先安装扩展&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;php7.3-zip &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;配置文件所有者&quot;&gt;配置文件所有者&lt;/h2&gt;

&lt;p&gt;最后，别忘记修改文件所有者：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chown&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; www-data:www-data &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;由于目前所在的工作目录为 &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/www/blog&lt;/code&gt;，所以可用表示当前工作目录的 &lt;code class=&quot;highlighter-rouge&quot;&gt;.&lt;/code&gt; 代替之前的 &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/www/blog&lt;/code&gt;，它们是等效的。&lt;/p&gt;

&lt;p&gt;至此，本小节目标完成。你可以通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;ll&lt;/code&gt; 命令来列出当前目录：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@JD:/var/www/blog# ll
total 300
drwxr-xr-x 12 www-data www-data   4096 Dec 26 12:03 ./
drwxr-xr-x  4 root     root       4096 Dec 26 12:02 ../
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;6配置-nginx-站点&quot;&gt;6.配置 Nginx 站点&lt;/h1&gt;

&lt;h2 id=&quot;nginx-站点配置&quot;&gt;Nginx 站点配置&lt;/h2&gt;

&lt;p&gt;根据 &lt;a href=&quot;https://laravel.com/docs/6.x/deployment&quot;&gt;Laravel部署文档&lt;/a&gt; 的说明，我们可直接拿到一份现成的 Nginx 配置文件，稍作调整即可：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;我这里做了下解释说明 &lt;a href=&quot;https://wi1dcard.dev/posts/laravel-recommended-nginx-conf-analysis/&quot;&gt;参考文章&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-nginx highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#监听 HTTP 协议默认的 [80] 端口。
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;listen&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#绑定主机名 [example.com]。
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;server_name&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;example.com&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#服务器站点根目录 [/example.com/public]。
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;/example.com/public&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# 添加几条有关安全的响应头
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;add_header&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;X-Frame-Options&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;SAMEORIGIN&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;add_header&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;X-XSS-Protection&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;mode=block&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;add_header&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;X-Content-Type-Options&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;nosniff&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# 站点默认页面；可指定多个，将顺序查找。
&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# 例如，访问 http://example.com/ Nginx 将首先尝试「站点根目录/index.html」是否存在，不存在则继续尝试「站点根目录/index.htm」，以此类推...
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;index.html&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;index.htm&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;index.php&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# 指定字符集为 UTF-8
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;charset&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;utf-8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# Laravel 默认重写规则；删除将导致 Laravel 路由失效且 Nginx 响应 404。
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;try_files&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$uri&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$uri&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;/index.php?&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$query_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;# 关闭 [/favicon.ico] 和 [/robots.txt] 的访问日志。
&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# 并且即使它们不存在，也不写入错误日志。
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;/favicon.ico&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;access_log&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;off&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;log_not_found&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;off&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;/robots.txt&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;access_log&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;off&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;log_not_found&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;off&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;# 将 [404] 错误交给 [/index.php] 处理，表示由 Laravel 渲染美观的错误页面。
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;error_page&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;404&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;/index.php&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# URI 符合正则表达式 [\.php$] 的请求将进入此段配置
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;\.php$&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# 配置 FastCGI 服务地址，可以为 IP:端口，也可以为 Unix socket。
&lt;/span&gt;        &lt;span class=&quot;kn&quot;&gt;fastcgi_pass&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;unix:/var/run/php/php7.2-fpm.sock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# 配置 FastCGI 的主页为 index.php。
&lt;/span&gt;        &lt;span class=&quot;kn&quot;&gt;fastcgi_index&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;index.php&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# 配置 FastCGI 参数 SCRIPT_FILENAME 为 $realpath_root$fastcgi_script_name。
&lt;/span&gt;        &lt;span class=&quot;kn&quot;&gt;fastcgi_param&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;SCRIPT_FILENAME&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$realpath_root$fastcgi_script_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# 引用更多默认的 FastCGI 参数。
&lt;/span&gt;        &lt;span class=&quot;kn&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fastcgi_params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# 通俗地说，以上配置将所有 URI 以 .php 结尾的请求，全部交给 PHP-FPM 处理。
&lt;/span&gt;    
    &lt;span class=&quot;c1&quot;&gt;# 除符合正则表达式 [/\.(?!well-known).*] 之外的 URI，全部拒绝访问
&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# 也就是说，拒绝公开以 [.] 开头的目录，[.well-known] 除外
&lt;/span&gt;    &lt;span class=&quot;kn&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/\.(?!well-known).*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;deny&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;通常我们仅需修改 &lt;code class=&quot;highlighter-rouge&quot;&gt;server_name&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;root&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;fastcgi_pass&lt;/code&gt;；请注意阅读 &lt;code class=&quot;highlighter-rouge&quot;&gt;#&lt;/code&gt; 后的注释。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /etc/nginx/sites-available

vi  blog.cn &lt;span class=&quot;c&quot;&gt;#填入你对应的配置信息&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#建立软连接&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo ln&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; /etc/nginx/sites-available/acme.cn /etc/nginx/sites-enabled/

&lt;span class=&quot;c&quot;&gt;#检测nginx配置是否正确&lt;/span&gt;
nginx &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#配置正常返回如下结果&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#nginx: the configuration file /etc/nginx/nginx.conf syntax is ok&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#nginx: configuration file /etc/nginx/nginx.conf test is successful&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#重启nginx&lt;/span&gt;
service nginx restart

&lt;span class=&quot;c&quot;&gt;#重启fpm 这里一定要重启&lt;/span&gt;
service php7.3-fpm restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;fastcgi-服务地址为-ip端口时的配置&quot;&gt;FastCGI 服务地址为 IP:端口时的配置&lt;/h2&gt;

&lt;h3 id=&quot;首先修改php的配置文件&quot;&gt;首先修改php的配置文件&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; vim /etc/php/7.3/fpm/pool.d/www.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;在37行加入如下代码&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; listen &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 127.0.0.1:9000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;另外需要注意下如果配置文件内有 listen =/run/php/php7.3-fpm.sock 最好注释 以免冲突&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;配置一&quot;&gt;配置一&lt;/h3&gt;

&lt;p&gt;若fpm配置文件中配置如下：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; listen &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 127.0.0.1:9000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;则对应的nginx.conf中的配置应为：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; fastcgi_pass   127.0.0.1:9000&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;此时开启9000端口监听，不会生成sock文件&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;配置二&quot;&gt;配置二&lt;/h3&gt;

&lt;p&gt;若fpm中的配置为使用Unix套接字，如下：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; listen &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; /run/php/php7.3-fpm.sock
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;则对应nginx.conf中的配置应为：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; fastcgi_pass   unix:/run/php/php7.3-fpm.sock&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;此时9000端口未开启，在/run/php/下生成php7.2-fpm.sock文件：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;注意&quot;&gt;注意&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;若两者不匹配则nginx启动失败。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;若fpm为sock，nginx为127.0.0.1:9000，则会出现以下错误：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;connect() failed (111: Connection refused) while connecting to upstream&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;若fpm未127.0.0.1:9000,nginx为sock，则会出现以下错误：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;connect() to unix:/run/php/php7.2-fpm.sock failed (2: No such file or directory) while connecting to upstream&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;重载-nginx&quot;&gt;重载 Nginx&lt;/h2&gt;

&lt;p&gt;配置完成后，请务必重启（Restart）或重载（Reload）Nginx。&lt;/p&gt;

&lt;p&gt;什么是 &lt;strong&gt;重载&lt;/strong&gt;？实际上，直接重启 Nginx 是不安全的。原因有二：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在 Nginx 进程结束再重新运行的过程中，将造成极短时间的闪断。虽然这一时间通常很短（一般来说在秒级别），但倘若面对大量并发，还是极易造成一部分请求无法访问，即服务中断。&lt;/li&gt;
  &lt;li&gt;在重启的过程中，若此时 Nginx 恰好正在处理请求，与客户端的 TCP 连接将会断开，客户端无法收到正确响应，造成前后端信息不一致。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;在之前的小节中，已经提到重启 Nginx 的方法；&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service nginx restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;同样地，亦可使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;service&lt;/code&gt; 命令重载 Nginx：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service nginx reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;另一种等效的方法是：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;nginx &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;最终效果&quot;&gt;最终效果&lt;/h2&gt;

&lt;p&gt;在浏览器内输入服务器公网 IP 或域名并访问，你将会看到 Laravel 应用的默认主页：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/lnmp/laravel_hellow.png&quot; alt=&quot;页面效果&quot; /&gt;&lt;/p&gt;

&lt;p&gt;恭喜你，部署成功。&lt;/p&gt;

&lt;h1 id=&quot;7安装mysql&quot;&gt;7.安装MYSQL&lt;/h1&gt;

&lt;h2 id=&quot;通过apt安装mysql&quot;&gt;通过apt安装mysql&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;mysql-server mysql-client &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;管理-mysql-服务&quot;&gt;管理 Mysql 服务&lt;/h2&gt;

&lt;p&gt;我们可使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;service&lt;/code&gt; 命令管理服务状态，常用操作如下：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service mysql start &lt;span class=&quot;c&quot;&gt;# 启动 Mysql&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service mysql stop &lt;span class=&quot;c&quot;&gt;# 停止 Mysql&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service mysql restart &lt;span class=&quot;c&quot;&gt;# 重启 Mysql&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;同时，可使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl&lt;/code&gt; 命令开关服务的开机自启：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;mysql &lt;span class=&quot;c&quot;&gt;# 启用 Mysql 开机启动&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl disable mysql &lt;span class=&quot;c&quot;&gt;# 禁用 Mysql 开机启动&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;通过以上配置，可使 Nginx 匹配请求 URI，若以 &lt;code class=&quot;highlighter-rouge&quot;&gt;js&lt;/code&gt; 或 &lt;code class=&quot;highlighter-rouge&quot;&gt;css&lt;/code&gt; 结尾，则将响应头 &lt;code class=&quot;highlighter-rouge&quot;&gt;Expires&lt;/code&gt; 的值设置为 &lt;code class=&quot;highlighter-rouge&quot;&gt;24h&lt;/code&gt; 返回。客户端浏览器将根据该值建立资源缓存，并在指定时间后过期，因此可节省部分服务器静态资源流量。&lt;code class=&quot;highlighter-rouge&quot;&gt;24h&lt;/code&gt; 可根据需要调整，若使用 CDN 服务分发静态资源，则不必配置此项。&lt;/p&gt;

&lt;h2 id=&quot;测试&quot;&gt;测试&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@JD:/var/run/php# mysql &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt;
Enter password: 
Welcome to the MySQL monitor.  Commands end with &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; or &lt;span class=&quot;se&quot;&gt;\g&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Your MySQL connection &lt;span class=&quot;nb&quot;&gt;id &lt;/span&gt;is 2
Server version: 5.7.28-0ubuntu0.18.04.4 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Ubuntu&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

Copyright &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 2000, 2019, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &lt;span class=&quot;s1&quot;&gt;'help;'&lt;/span&gt; or &lt;span class=&quot;s1&quot;&gt;'\h'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;help. Type &lt;span class=&quot;s1&quot;&gt;'\c'&lt;/span&gt; to clear the current input statement.

mysql&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;出现以上结果说明mysql安装成功&lt;/p&gt;

&lt;p&gt;进入数据库后输入命令 设置新的密码&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;use mysql&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
update mysql.user &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;authentication_string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;PASSWORD&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'新密码'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;nv&quot;&gt;plugin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'mysql_native_password'&lt;/span&gt; where &lt;span class=&quot;nv&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'root'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#执行成功显示如下&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#Query OK, 1 row affected, 1 warning (0.00 sec)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#Rows matched: 1  Changed: 1  Warnings: 1&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#刷新权限&lt;/span&gt;
flush privileges&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#Query OK, 0 rows affected (0.00 sec)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;重启MySQL服务，再次进入数据库吗，输入新设置的密码 重启mysql服务&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;service mysql restart

mysql &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;mysql-创建新用户&quot;&gt;mysql 创建新用户&lt;/h2&gt;

&lt;h3 id=&quot;创建一个所有权用户&quot;&gt;创建一个所有权用户&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysql &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt;
mysql&amp;gt;create user db_user@&lt;span class=&quot;s1&quot;&gt;'%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'db_password'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#创建用户&lt;/span&gt;
mysql&amp;gt; grant all privileges on &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to db_user@&lt;span class=&quot;s1&quot;&gt;'%'&lt;/span&gt; with grant option&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#授权&lt;/span&gt;
flush privileges&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
mysql&amp;gt; &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;创建一个条件限制用户&quot;&gt;创建一个条件限制用户&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;添加一个用户名为db_user，密码为db_pass，授权为% （%表示所有IP能连接）对db_name数据库所有权限，命令如下：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#MySQL8.0版本&lt;/span&gt;
mysql &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt;
mysql&amp;gt;create user db_user@&lt;span class=&quot;s1&quot;&gt;'%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'db_pass'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#创建用户&lt;/span&gt;
mysql&amp;gt; grant all privileges on db_name.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to db_user@&lt;span class=&quot;s1&quot;&gt;'%'&lt;/span&gt; with grant option&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#授权&lt;/span&gt;
flush privileges&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
mysql&amp;gt; &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#其余MySQL版本&lt;/span&gt;
mysql&amp;gt; grant all privileges on db_name.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to db_user@&lt;span class=&quot;s1&quot;&gt;'%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'db_pass'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#授权语句，特别注意有分号&lt;/span&gt;
flush privileges&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
mysql&amp;gt; &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;注意-1&quot;&gt;注意&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;最后记得重启  service mysql restart 还有 如果是云服务器 记得设置安全组允许端口访问&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;设置允许外网访问&quot;&gt;设置允许外网访问&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vi /etc/mysql/mysql.conf.d/mysqld.cnf
&lt;span class=&quot;c&quot;&gt;#注释掉 #bind-address = 127.0.0.1&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#再重启启动mysql 生效&lt;/span&gt;
service mysql restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;测试-1&quot;&gt;测试&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/static/img/lnmp/test_mysql.png&quot; alt=&quot;效果如图&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;8生产环境的必要优化&quot;&gt;8.生产环境的必要优化&lt;/h1&gt;

&lt;p&gt;本篇内容部分摘选自 &lt;a href=&quot;https://laravel.com/docs/6.x/deployment&quot;&gt;Laravel部署文档&lt;/a&gt;，你可以阅读该文档获取更多信息。&lt;/p&gt;

&lt;h2 id=&quot;nginx-配置&quot;&gt;Nginx 配置&lt;/h2&gt;

&lt;p&gt;对于 Laravel 应用来说，优化 Nginx 配置所带来的性能提升可谓微不足道。因此不建议在中小型项目中花费较多精力调优 Nginx。&lt;/p&gt;

&lt;p&gt;不过，有一点值得注意：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;server {
    # ...
    location ~* \.(js|css)$ {
        expires 24h;
    }
    #...
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;通过以上配置，可使 Nginx 匹配请求 URI，若以 &lt;code class=&quot;highlighter-rouge&quot;&gt;js&lt;/code&gt; 或 &lt;code class=&quot;highlighter-rouge&quot;&gt;css&lt;/code&gt; 结尾，则将响应头 &lt;code class=&quot;highlighter-rouge&quot;&gt;Expires&lt;/code&gt; 的值设置为 &lt;code class=&quot;highlighter-rouge&quot;&gt;24h&lt;/code&gt; 返回。客户端浏览器将根据该值建立资源缓存，并在指定时间后过期，因此可节省部分服务器静态资源流量。&lt;code class=&quot;highlighter-rouge&quot;&gt;24h&lt;/code&gt; 可根据需要调整，若使用 CDN 服务分发静态资源，则不必配置此项。&lt;/p&gt;

&lt;h2 id=&quot;laravel-的配置缓存与路由缓存&quot;&gt;Laravel 的配置缓存与路由缓存&lt;/h2&gt;

&lt;p&gt;开启 &lt;strong&gt;配置缓存&lt;/strong&gt; 和 &lt;strong&gt;路由缓存&lt;/strong&gt; 能够在一定程度上提升 Laravel 的性能。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php artisan config:cache &lt;span class=&quot;c&quot;&gt;# 生成配置缓存&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：当开启配置缓存后，&lt;code class=&quot;highlighter-rouge&quot;&gt;env()&lt;/code&gt; 函数将会失效；它将会永远返回 &lt;code class=&quot;highlighter-rouge&quot;&gt;null&lt;/code&gt;；因此务必确保在非配置文件内，未直接调用该函数。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php artisan route:cache &lt;span class=&quot;c&quot;&gt;# 生成路由缓存&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：路由缓存仅支持控制器风格；若路由注册时存在闭包（Closures），则无法使用该功能。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：生成缓存后，对配置和路由的修改将不会生效，需再次执行缓存命令，或使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;php artisan cache:clear&lt;/code&gt; 命令清除它们。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;composer&quot;&gt;Composer&lt;/h2&gt;

&lt;p&gt;在安装依赖时，建议使用以下命令：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;composer &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--optimize-autoloader&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--no-dev&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;其中，&lt;code class=&quot;highlighter-rouge&quot;&gt;--optimize-autoloader&lt;/code&gt; 表示生成优化后的自动加载器，虽然生成过程可能较慢，但换来的是提高运行时的效率。&lt;code class=&quot;highlighter-rouge&quot;&gt;--no-dev&lt;/code&gt; 表示不安装 composer.json 中 &lt;code class=&quot;highlighter-rouge&quot;&gt;require-dev&lt;/code&gt; 声明的扩展包，在生产环境中我们不需要这些开发依赖。&lt;/p&gt;

&lt;h2 id=&quot;再谈文件权限&quot;&gt;再谈文件权限&lt;/h2&gt;

&lt;p&gt;文件权限直接关系到服务器安全与否。通常情况下，我们应当遵循「最小权限原则」，即权限越小越好。对于 Laravel 来说，我个人比较倾向的权限配置为：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /var/www/blog
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; 750 &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; 770 storage bootstrap/cache
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;你可以通过在线工具 &lt;a href=&quot;https://chmod-calculator.com/&quot;&gt;Chmod Calculator&lt;/a&gt; 来计算八进制权限数字：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/lnmp/per.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;上图是 &lt;code class=&quot;highlighter-rouge&quot;&gt;750&lt;/code&gt; 所代表的权限，即文件所有者可 &lt;strong&gt;读、写、执行（进入）&lt;/strong&gt;，文件所有组可 &lt;strong&gt;读、执行（进入）&lt;/strong&gt;，其余用户 &lt;strong&gt;均不可&lt;/strong&gt;。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;注意：对于文件来说，&lt;code class=&quot;highlighter-rouge&quot;&gt;Execute&lt;/code&gt; 权限表示可执行；对于目录来说，表示可进入（即 &lt;code class=&quot;highlighter-rouge&quot;&gt;cd&lt;/code&gt;）。为方便描述，以下统称为「执行」权限。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;也就是说，运行 Nginx 和 PHP-FPM 的 &lt;code class=&quot;highlighter-rouge&quot;&gt;www-data&lt;/code&gt; 用户，可读、写、执行；&lt;code class=&quot;highlighter-rouge&quot;&gt;www-data&lt;/code&gt; 用户组内的用户可读、执行。&lt;/p&gt;

&lt;p&gt;而 &lt;code class=&quot;highlighter-rouge&quot;&gt;770&lt;/code&gt; 则更加宽松 —— 对于 Laravel 运行时需要写入的目录，赋予文件所有组可 &lt;strong&gt;读、写、执行&lt;/strong&gt; 权限；也就是说 &lt;code class=&quot;highlighter-rouge&quot;&gt;www-data&lt;/code&gt; 用户组内的用户可写 &lt;code class=&quot;highlighter-rouge&quot;&gt;storage&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;bootstrap/cache&lt;/code&gt; 目录。&lt;/p&gt;

&lt;h2 id=&quot;杂项&quot;&gt;杂项&lt;/h2&gt;

&lt;p&gt;根据应用本身的逻辑不同，涉及的 Laravel 功能也不一样。针对部分项目，你有可能还需要执行以下 Artisan 命令：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php artisan storage:link &lt;span class=&quot;c&quot;&gt;# 软链接 app/storage 到 public 目录，以便公开访问&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php artisan migrate &lt;span class=&quot;c&quot;&gt;# 执行迁移&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php artisan db:seed &lt;span class=&quot;c&quot;&gt;# 执行数据填充&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Thu, 26 Dec 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019-12-26-Ubuntu18.04-%E6%90%AD%E5%BB%BA-PHP-%E7%8E%AF%E5%A2%83.html</link>
        <guid isPermaLink="true">http://localhost:4000/2019-12-26-Ubuntu18.04-%E6%90%AD%E5%BB%BA-PHP-%E7%8E%AF%E5%A2%83.html</guid>
        
        <category>ubuntu</category>
        
        <category>php</category>
        
        <category>lnmp</category>
        
        <category>composer</category>
        
        <category>nginx</category>
        
        <category>mysql</category>
        
        
        <category>Server</category>
        
      </item>
    
      <item>
        <title>以动画的方式，快速直观地查看 Git 文件变动历史</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1说明&quot; id=&quot;markdown-toc-1说明&quot;&gt;1.说明&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2效果如下&quot; id=&quot;markdown-toc-2效果如下&quot;&gt;2.效果如下：&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3亲自体验&quot; id=&quot;markdown-toc-3亲自体验&quot;&gt;3.亲自体验&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4其他方式&quot; id=&quot;markdown-toc-4其他方式&quot;&gt;4.其他方式&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5参考文章&quot; id=&quot;markdown-toc-5参考文章&quot;&gt;5.参考文章&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&lt;em&gt;以动画的方式，快速直观地查看 Git 文件变动历史&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;1说明&quot;&gt;1.说明&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/pomber/git-history&quot;&gt;pomber/git-history&lt;/a&gt;是一款能够以动画形式快速、直观地展现 Git 仓库内文件变动历史的 Web 工具。&lt;/p&gt;

&lt;h2 id=&quot;2效果如下&quot;&gt;2.效果如下：&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/git.gif&quot; alt=&quot;动图效果&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;3亲自体验&quot;&gt;3.亲自体验&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.githistory.xyz/babel/babel/blob/master/packages/babel-core/test/browserify.js&quot;&gt;试试看&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;4其他方式&quot;&gt;4.其他方式&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;相比于主流的 Blame / Annotation，这种方式可以更加 迅速直观 地查看历史提交对于文件的变动影响。
该作者除了将仓库开源外，还将项目托管在了 https://githistory.xyz/。我们可以打开 GitHub 上的任意文件，然后将域名 github.com 替换为 github.githistory.xyz 即可使用。
似乎还是有些麻烦，域名比较长，若是短一些就更棒了；而且直接在地址栏修改域名通常没有补全，比较痛苦。
该项目给出另一个方案：&lt;a href=&quot;https://chrome.google.com/webstore/detail/git-history-browser-exten/laghnmifffncfonaoffcndocllegejnf&quot;&gt;Chrome Extension&lt;/a&gt; 在此，效果如下：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/static/img/git_2.png&quot; alt=&quot;效果&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;5参考文章&quot;&gt;5.参考文章&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://learnku.com/articles/23986&quot;&gt;参考文章&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Wed, 25 Dec 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019-12-25-%E4%BB%A5%E5%8A%A8%E7%94%BB%E7%9A%84%E6%96%B9%E5%BC%8F-%E5%BF%AB%E9%80%9F%E7%9B%B4%E8%A7%82%E5%9C%B0%E6%9F%A5%E7%9C%8B-Git-%E6%96%87%E4%BB%B6%E5%8F%98%E5%8A%A8%E5%8E%86%E5%8F%B2.html</link>
        <guid isPermaLink="true">http://localhost:4000/2019-12-25-%E4%BB%A5%E5%8A%A8%E7%94%BB%E7%9A%84%E6%96%B9%E5%BC%8F-%E5%BF%AB%E9%80%9F%E7%9B%B4%E8%A7%82%E5%9C%B0%E6%9F%A5%E7%9C%8B-Git-%E6%96%87%E4%BB%B6%E5%8F%98%E5%8A%A8%E5%8E%86%E5%8F%B2.html</guid>
        
        <category>git</category>
        
        
        <category>Git</category>
        
      </item>
    
      <item>
        <title>基于 MySQL 协议，Swoole 开发的MySQL数据库连接池使用教程。</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#安装&quot; id=&quot;markdown-toc-安装&quot;&gt;安装&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#运行&quot; id=&quot;markdown-toc-运行&quot;&gt;运行&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#我遇到的问题&quot; id=&quot;markdown-toc-我遇到的问题&quot;&gt;我遇到的问题&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#我的databasejson文件如下&quot; id=&quot;markdown-toc-我的databasejson文件如下&quot;&gt;我的database.json文件如下&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#我的serverjson文件如下&quot; id=&quot;markdown-toc-我的serverjson文件如下&quot;&gt;我的server.json文件如下&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#官网说明&quot; id=&quot;markdown-toc-官网说明&quot;&gt;官网说明&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&lt;em&gt;基于 MySQL 协议，Swoole 开发的MySQL数据库连接池使用教程&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;安装&quot;&gt;安装&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/louislivi/SMProxy.git
composer install --no-dev # 如果你想贡献你的代码，请不要使用 --no-dev 参数。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;运行&quot;&gt;运行&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd SMProxy
bin/SMProxy start 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;启动成功后的界面如下所示&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@JD:/var/www/SMProxy# bin/SMProxy start

  /$$$$$$  /$$      /$$ /$$$$$$$                                        
 /$$__  $$| $$$    /$$$| $$__  $$                                       
| $$  \__/| $$$$  /$$$$| $$  \ $$ /$$$$$$   /$$$$$$  /$$   /$$ /$$   /$$
|  $$$$$$ | $$ $$/$$ $$| $$$$$$$//$$__  $$ /$$__  $$|  $$ /$$/| $$  | $$
 \____  $$| $$  $$$| $$| $$____/| $$  \__/| $$  \ $$ \  $$$$/ | $$  | $$
 /$$  \ $$| $$\  $ | $$| $$     | $$      | $$  | $$  &amp;gt;$$  $$ | $$  | $$
|  $$$$$$/| $$ \/  | $$| $$     | $$      |  $$$$$$/ /$$/\  $$|  $$$$$$$
 \______/ |__/     |__/|__/     |__/       \______/ |__/  \__/ \____  $$
                                                               /$$  | $$
                                                              |  $$$$$$/
                                                               \______/
                                                               

SMProxy version: v1.3.0@e6a640a

Server starting ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;查看启动后的状态&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@JD:/var/www/SMProxy# bin/SMProxy status
SMProxy[v1.3.0] - Linux JD 4.4.0-62-generic #83-Ubuntu SMP Wed Jan 18 14:10:15 UTC 2017 x86_64
Host: 0.0.0.0, Port: 3366, PHPVerison: 7.3.12-1+ubuntu16.04.1+deb.sury.org+1
SwooleVersion: 4.4.12, WorkerNum: 2
Process :  26 total,  24 sleep,  2 query
+------+--------+-----------------+-----------+---------+------+-----------+-----------------------------+-------------------------+-----------------------+---------------+-------------+
| ID   | USER   | HOST            | DB        | COMMAND | TIME | STATE     | INFO                        | SERVER_VERSION          | PLUGIN_NAME           | SERVER_STATUS | SERVER_KEY  |
+------+--------+-----------------+-----------+---------+------+-----------+-----------------------------+-------------------------+-----------------------+---------------+-------------+
| 1789 | zhifan | localhost:58178 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | writeSΜbbs |
| 1790 | zhifan | localhost:58182 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | writeSΜbbs |
| 1791 | zhifan | localhost:58186 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | writeSΜbbs |
| 1793 | zhifan | localhost:58190 | bbs       | Query   | 0    | executing | /*SMProxy processlist sql*/ | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | writeSΜbbs |
| 1794 | zhifan | localhost:58196 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1795 | zhifan | localhost:58200 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1796 | zhifan | localhost:58204 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1797 | zhifan | localhost:58208 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1798 | zhifan | localhost:58212 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1799 | zhifan | localhost:58216 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1800 | zhifan | localhost:58220 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1801 | zhifan | localhost:58224 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1802 | zhifan | localhost:58228 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1803 | zhifan | localhost:58232 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1804 | zhifan | localhost:58236 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1805 | zhifan | localhost:58240 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1806 | zhifan | localhost:58244 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1807 | zhifan | localhost:58248 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1808 | zhifan | localhost:58252 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1809 | zhifan | localhost:58270 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1810 | zhifan | localhost:58268 | bbs       | Query   | 0    | executing | /*SMProxy processlist sql*/ | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1811 | zhifan | localhost:58264 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1812 | zhifan | localhost:58260 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1813 | zhifan | localhost:58256 | bbs       | Sleep   | 35   |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | readSΜbbs  |
| 1814 | zhifan | localhost:58278 | bookstack | Sleep   | 6    |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | read        |
| 1815 | zhifan | localhost:58280 | bookstack | Sleep   | 6    |           |                             | 5.7.28-0ubuntu0.16.04.2 | mysql_native_password | 2             | read        |
+------+--------+-----------------+-----------+---------+------+-----------+-----------------------------+-------------------------+-----------------------+---------------+-------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;
&lt;h2 id=&quot;我遇到的问题&quot;&gt;我遇到的问题&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2019-12-17 13:37:21 [warning] Config serverInfo-&amp;gt;write-&amp;gt;account is not exists! (/var/www/SMProxy/src/Base.php:99)
2019-12-17 13:37:21 [warning] Config serverInfo-&amp;gt;write-&amp;gt;account is not exists! (/var/www/SMProxy/src/Base.php:99)
2019-12-17 13:38:35 [info] Worker started!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://smproxy.louislivi.com/#/README?id=%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98&quot;&gt;常见问题&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;参考上面的说明 我把database-&amp;gt;account下面的root 改为了zhifan 然后启动成功&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;这里附上我自己的配置文件 对于account对应的用户名非root远程访问的一定要记得修改root那个key为自己账户的&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;我的databasejson文件如下&quot;&gt;我的database.json文件如下&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
  &quot;database&quot;: {
    &quot;account&quot;: {
      &quot;db_user&quot;: { # 我就是错在这里了  之前是root  我忘记修改 导致报错 改完之后即可正常运行
        &quot;zhifan&quot;: &quot;zhifan&quot;, 
        &quot;password&quot;: &quot;password&quot;
      }
    },
    &quot;serverInfo&quot;: {
      &quot;server1&quot;: {
        &quot;write&quot;: {
          &quot;host&quot;: [&quot;127.0.0.1&quot;],
          &quot;port&quot;: 3306,
          &quot;timeout&quot;: 2,
          &quot;account&quot;: &quot;zhifan&quot;
        },
        &quot;read&quot;: {
          &quot;host&quot;: [&quot;127.0.0.1&quot;],
          &quot;port&quot;: 3306,
          &quot;timeout&quot;: 2,
          &quot;account&quot;: &quot;zhifan&quot;,
          &quot;startConns&quot;: &quot;swoole_cpu_num()*10&quot;,
          &quot;maxSpareConns&quot;: &quot;swoole_cpu_num()*10&quot;,
          &quot;maxSpareExp&quot;: 3600,
          &quot;maxConns&quot;: &quot;swoole_cpu_num()*20&quot;
        }
      }
    },
    &quot;databases&quot;: {
      &quot;bbs&quot;: {
        &quot;serverInfo&quot;: &quot;server1&quot;,
        &quot;startConns&quot;: &quot;swoole_cpu_num()*2&quot;,
        &quot;maxSpareConns&quot;: &quot;swoole_cpu_num()*2&quot;,
        &quot;maxSpareExp&quot;: 3600,
        &quot;maxConns&quot;: &quot;swoole_cpu_num()*2&quot;,
        &quot;charset&quot;: &quot;utf8mb4&quot;
      }
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;该命令会发布配置文件 laravels.php 到 config 目录下，以及脚本文件到 bin 目录下：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;我的serverjson文件如下&quot;&gt;我的server.json文件如下&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
  &quot;server&quot;: {
    &quot;user&quot;: &quot;root&quot;,
    &quot;password&quot;: &quot;123456&quot;,
    &quot;charset&quot;: &quot;utf8mb4&quot;,
    &quot;host&quot;: &quot;0.0.0.0&quot;,
    &quot;port&quot;: &quot;3366&quot;,
    &quot;mode&quot;: &quot;SWOOLE_PROCESS&quot;,
    &quot;sock_type&quot;: &quot;SWOOLE_SOCK_TCP&quot;,
    &quot;logs&quot;: {
      &quot;open&quot;:true,
      &quot;config&quot;: {
        &quot;system&quot;: {
          &quot;log_path&quot;: &quot;ROOT/logs&quot;,
          &quot;log_file&quot;: &quot;system.log&quot;,
          &quot;format&quot;: &quot;Y/m/d&quot;
        },
        &quot;mysql&quot;: {
          &quot;log_path&quot;: &quot;ROOT/logs&quot;,
          &quot;log_file&quot;: &quot;mysql.log&quot;,
          &quot;format&quot;: &quot;Y/m/d&quot;
        }
      }
    },
    &quot;swoole&quot;: {
      &quot;worker_num&quot;: &quot;swoole_cpu_num()&quot;,
      &quot;max_coro_num&quot;: 6000,
      &quot;open_tcp_nodelay&quot;: true,
      &quot;daemonize&quot;: true,
      &quot;heartbeat_check_interval&quot;: 60,
      &quot;heartbeat_idle_time&quot;: 600,
      &quot;reload_async&quot;: true,
      &quot;log_file&quot;: &quot;ROOT/logs/swoole.log&quot;,
      &quot;pid_file&quot;: &quot;ROOT/logs/pid/server.pid&quot;
    },
    &quot;swoole_client_setting&quot;: {
      &quot;package_max_length&quot;: 16777215
    },
    &quot;swoole_client_sock_setting&quot;: {
      &quot;sock_type&quot;: &quot;SWOOLE_SOCK_TCP&quot;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;官网说明&quot;&gt;官网说明&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://smproxy.louislivi.com/#/README&quot;&gt;参考官网链接&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 17 Dec 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019-12-17-%E5%9F%BA%E4%BA%8E-SMProxy-%E9%80%9A%E8%BF%87%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6%E5%AE%9E%E7%8E%B0-MySQL-%E8%BF%9E%E6%8E%A5%E6%B1%A0.html</link>
        <guid isPermaLink="true">http://localhost:4000/2019-12-17-%E5%9F%BA%E4%BA%8E-SMProxy-%E9%80%9A%E8%BF%87%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6%E5%AE%9E%E7%8E%B0-MySQL-%E8%BF%9E%E6%8E%A5%E6%B1%A0.html</guid>
        
        <category>SMProxy</category>
        
        <category>mysql</category>
        
        
        <category>Mysql</category>
        
      </item>
    
  </channel>
</rss>
