(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{506:function(s,a,e){"use strict";e.r(a);var t=e(33),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"编写填充器类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编写填充器类"}},[s._v("#")]),s._v(" 编写填充器类")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("php artisan make:seeder UsersTableSeeder\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("该命令会在 database/seeds 目录下创建一个 UsersTableSeeder 填充器类，初始化代码如下：")])]),s._v(" "),e("div",{staticClass:"language-php line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token php language-php"}},[e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[s._v("Illuminate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Database"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Seeder")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[s._v("UsersTableSeeder")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Seeder")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * Run the database seeds.\n     *\n     * @return void\n     */")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function-definition function"}},[s._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        \n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h2",{attrs:{id:"填充器的运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#填充器的运行"}},[s._v("#")]),s._v(" 填充器的运行")]),s._v(" "),e("blockquote",[e("p",[s._v("Laravel 提供了两种方式来运行填充器：一种是独立的填充命令，另一种是在运行迁移命令时通过指定标识选项在创建数据表时填充。")])]),s._v(" "),e("p",[s._v("独立的填充命令如下：")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("php artisan db:seed\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("php artisan db:seed --class"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("UsersTableSeeder\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("上述第一个 Artisan 命令会以 DatabaseSeeder 为入口类，调用该类的 run 方法，你可以将所有对其他填充器的调用定义在该方法中，例如：")])]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$this")]),s._v("-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("call"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UsersTableSeeder::class"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这样，就可以一次性调用所有填充器啦。")]),s._v(" "),e("p",[s._v("当然，你也可以通过 --class= 选项指定运行某个填充器类的 run 方法。")]),s._v(" "),e("p",[s._v("此外，在某些时候，你可能希望在运行迁移命令的同时填充测试数据，尤其是在初始化一些演示项目的时候。这可以通过不指定值的  --seed 选项来实现")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("php artisan migrate --seed \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("php artisan migrate:refresh --seed\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("第一条命令用于执行迁移命令时运行填充器类 DatabaseSeeder 填充数据，第二条命令用于回滚所有迁移并重新运行迁移同时填充初始化数据。")])]),s._v(" "),e("h2",{attrs:{id:"创建迁移文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建迁移文件"}},[s._v("#")]),s._v(" 创建迁移文件")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("php artisan make:migration create_users_table --create"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("users  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建数据表迁移")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("php artisan make:migration alter_users_add_nickname --table"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("users  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新数据表迁移")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);