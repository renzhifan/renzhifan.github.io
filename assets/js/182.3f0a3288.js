(window.webpackJsonp=window.webpackJsonp||[]).push([[182],{596:function(s,t,e){"use strict";e.r(t);var a=e(33),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"报错"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#报错"}},[s._v("#")]),s._v(" 报错")]),s._v(" "),e("p",[s._v("使用的第三方库 "),e("code",[s._v("github.com/olivere/elastic/v7")])]),s._v(" "),e("p",[s._v("报错如下")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("no active connection found: no Elasticsearch node available\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"解决"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决"}},[s._v("#")]),s._v(" 解决")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/olivere/elastic/issues/810",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker No Elastic Node Aviable"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("关闭sniff模式；或者设置es的地址为publish_address 地址")]),s._v(" "),e("p",[s._v("代码设置"),e("a",{attrs:{href:"https://github.com/olivere/elastic/wiki/Sniffing",target:"_blank",rel:"noopener noreferrer"}},[s._v("sniff"),e("OutboundLink")],1),s._v(" 为false")]),s._v(" "),e("h2",{attrs:{id:"完整代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#完整代码"}},[s._v("#")]),s._v(" 完整代码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('package main\n\nimport (\n\t"fmt"\n\t"github.com/olivere/elastic/v7"\n)\n\nfunc main() {\n\t// 创建ES client用于后续操作ES\n\t_, err := elastic.NewClient(\n\t\t// 设置ES服务地址，支持多个地址\n\t\telastic.SetSniff(false),\n\t\telastic.SetURL("http://你的ip地址:9200/"),\n\t\t// 设置基于http base auth验证的账号和密码\n\t\telastic.SetBasicAuth("你的es账号", "你的es密码"),\n\t)\n\tif err != nil {\n\t\t// Handle error\n\t\tfmt.Printf("连接失败: %v\\n", err)\n\t} else {\n\t\tfmt.Println("连接成功")\n\t}\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])]),e("h2",{attrs:{id:"分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分析"}},[s._v("#")]),s._v(" 分析")]),s._v(" "),e("p",[s._v("`It has to do something with the way sniffing works (see details in the Wiki). The node IPs are probably not accessible from your application.When you enable sniffing, it will retrieve the node IPs from the http.publish_address. And that seems to be routeable")]),s._v(" "),e("p",[s._v("查看"),e("code",[s._v("publish_address")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl -XGET '0.0.0.0:9200/_nodes/http?pretty'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);