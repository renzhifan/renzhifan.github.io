(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{522:function(s,a,e){"use strict";e.r(a);var n=e(33),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"_1-仅更新单个库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-仅更新单个库"}},[s._v("#")]),s._v(" 1. 仅更新单个库")]),s._v(" "),e("blockquote",[e("p",[s._v("只想更新某个特定的库，不想更新它的所有依赖，很简单：")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" update foo/bar\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("此外，这个技巧还可以用来解决“警告信息问题”。你一定见过这样的警告信息：")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("Warning: The lock "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" is not up to "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" with the latest changes "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" composer.json, you may be getting outdated dependencies, run update to update them.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("擦，哪里出问题了？别惊慌！如果你编辑了"),e("code",[s._v("composer.json")]),s._v("，你应该会看到这样的信息。比如，如果你增加或更新了细节信息，比如库的描述、作者、更多参数，甚至仅仅增加了一个空格，都会改变文件的"),e("code",[s._v("md5sum")]),s._v("。然后"),e("code",[s._v("Composer")]),s._v("就会警告你哈希值和"),e("code",[s._v("composer.lock")]),s._v("中记载的不同。")]),s._v(" "),e("p",[s._v("那么我们该怎么办呢？"),e("code",[s._v("update")]),s._v("命令可以更新"),e("code",[s._v("lock")]),s._v("文件，但是如果仅仅增加了一些描述，应该是不打算更新任何库。这种情况下，只需"),e("code",[s._v("update nothing")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" update nothing\nLoading "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" repositories with package information\nUpdating dependencies\nNothing to "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" or update\nWriting lock "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\nGenerating autoload files\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("这样一来，"),e("code",[s._v("Composer")]),s._v("不会更新库，但是会更新"),e("code",[s._v("composer.lock")]),s._v("。注意"),e("code",[s._v("nothing")]),s._v("并不是"),e("code",[s._v("update")]),s._v("命令的关键字。只是没有"),e("code",[s._v("nothing")]),s._v(" 这个包导致的结果。如果你输入"),e("code",[s._v("foobar")]),s._v("，结果也一样。")]),s._v(" "),e("p",[s._v("如果你用的"),e("code",[s._v("Composer")]),s._v("版本足够新，那么你可以直接使用"),e("code",[s._v("--lock")]),s._v("选项：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" update --lock\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"_2-不编辑composer-json的情况下安装库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-不编辑composer-json的情况下安装库"}},[s._v("#")]),s._v(" 2. 不编辑composer.json的情况下安装库")]),s._v(" "),e("blockquote",[e("p",[s._v("你可能会觉得每安装一个库都需要修改composer.json太麻烦，那么你可以直接使用require命令。")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" require "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo/bar:1.0.0"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这个方法也可以用来快速地新开一个项目。"),e("code",[s._v("init")]),s._v("命令有"),e("code",[s._v("--require")]),s._v("选项，可以自动编写"),e("code",[s._v("composer.json")]),s._v("：（注意我们使用"),e("code",[s._v("-n")]),s._v("，这样就不用回答问题）")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" init --require"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("foo/bar:1.0.0 -n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" composer.json\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"require"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo/bar"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"_3-派生很容易"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-派生很容易"}},[s._v("#")]),s._v(" 3. 派生很容易")]),s._v(" "),e("p",[s._v("初始化的时候，你试过"),e("code",[s._v("create-project")]),s._v("命令么？")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" create-project doctrine/orm path "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v(".0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这会自动克隆仓库，并检出指定的版本。克隆库的时候用这个命令很方便，不需要搜寻原始的URI了。")]),s._v(" "),e("h2",{attrs:{id:"_4-考虑缓存-dist包优先"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-考虑缓存-dist包优先"}},[s._v("#")]),s._v(" 4. 考虑缓存，"),e("code",[s._v("dist")]),s._v("包优先")]),s._v(" "),e("p",[s._v("最近一年以来的Composer会自动存档你下载的dist包。默认设置下，dist包用于加了tag的版本，例如"),e("code",[s._v('"symfony/symfony": "v2.1.4"')]),s._v("，或者是通配符或版本区间，"),e("code",[s._v('"2.1.*"')]),s._v("或"),e("code",[s._v('">=2.2,<2.3-dev"')]),s._v("（如果你使用stable作为你的minimum-stability）。")]),s._v(" "),e("p",[e("code",[s._v("dist")]),s._v("包也可以用于诸如"),e("code",[s._v("dev-master")]),s._v("之类的分支，"),e("code",[s._v("Github")]),s._v("允许你下载某个git引用的压缩包。为了强制使用压缩包，而不是克隆源代码，你可以使用"),e("code",[s._v("install")]),s._v("和"),e("code",[s._v("update的--prefer-dist")]),s._v("选项。")]),s._v(" "),e("p",[s._v("下面是一个例子（我使用了"),e("code",[s._v("--profile")]),s._v("选项来显示执行时间）：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" init --require"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"twig/twig:1.*"')]),s._v(" -n --profile\nMemory usage: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".94MB "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("peak: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".08MB"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", time: 0s\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --profile\nLoading "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" repositories with package information\nInstalling dependencies\n  - Installing twig/twig "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1.12.2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Downloading: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("%\n\nWriting lock "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\nGenerating autoload files\nMemory usage: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(".13MB "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("peak: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(".65MB"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", time: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".71s\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf vendor\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --profile\nLoading "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" repositories with package information\nInstalling dependencies from lock "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n  - Installing twig/twig "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1.12.2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Loading from cache\n\nGenerating autoload files\nMemory usage: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".96MB "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("peak: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".57MB"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", time: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".45s\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])]),e("p",[s._v("这里，"),e("code",[s._v("twig/twig:1.12.2")]),s._v("的压缩包被保存在"),e("code",[s._v("~/.composer/cache/files/twig/twig/1.12.2.0-v1.12.2.zip")]),s._v("。重新安装包时直接使用。")]),s._v(" "),e("h2",{attrs:{id:"_5-若要修改-源代码优先"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-若要修改-源代码优先"}},[s._v("#")]),s._v(" 5. 若要修改，源代码优先")]),s._v(" "),e("blockquote",[e("p",[s._v("当你需要修改库的时候，克隆源代码就比下载包方便了。你可以使用"),e("code",[s._v("--prefer-source")]),s._v("来强制选择克隆源代码。")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" update symfony/yaml --prefer-source\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("接下来你可以修改文件：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" status -v\nYou have changes "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the following dependencies:\n/path/to/app/vendor/symfony/yaml/Symfony/Component/Yaml:\n    M Dumper.php\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("当你试图更新一个修改过的库的时候，"),e("code",[s._v("Composer")]),s._v("会提醒你，询问是否放弃修改：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" update\nLoading "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" repositories with package information\nUpdating dependencies\n  - Updating symfony/symfony v2.2.0 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v2.2.0- "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" v2.2.0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    The package has modified files:\n    M Dumper.php\n    Discard changes "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y,n,v,s,?"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("?\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"为生产环境作准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为生产环境作准备"}},[s._v("#")]),s._v(" 为生产环境作准备")]),s._v(" "),e("blockquote",[e("p",[s._v("最后提醒一下，在部署代码到生产环境的时候，别忘了优化一下自动加载：")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" dump-autoload --optimize\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("安装包的时候可以同样使用"),e("code",[s._v("--optimize-autoloader")]),s._v("。不加这一选项，你可能会发现20%到25%的性能损失。")])])}),[],!1,null,null,null);a.default=t.exports}}]);