(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{625:function(s,a,n){"use strict";n.r(a);var e=n(33),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("blockquote",[n("p",[s._v("RabbitMQ持久化机制分为"),n("strong",[s._v("队列持久化")]),s._v("、"),n("strong",[s._v("消息持久化")]),s._v("、"),n("strong",[s._v("交换器持久化")]),s._v("。"),n("code",[s._v("不管是持久化的消息还是非持久化的消息都可以被写入到磁盘")]),s._v("。")])]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("持久化消息会同时写入磁盘和内存")]),s._v("（加快读取速度），"),n("strong",[s._v("非持久化消息会在内存不够用时")]),s._v("，将消息写入磁盘（"),n("strong",[s._v("Rabbitmq重启之后就没有了")]),s._v("）。")])]),s._v(" "),n("h2",{attrs:{id:"rabbitmq队列持久化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq队列持久化"}},[s._v("#")]),s._v(" Rabbitmq队列持久化")]),s._v(" "),n("p",[s._v("声明队列的时候可以设置队列是否需要持久化\nGolang的队列声明方式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('q, err := ch.QueueDeclare(\n  "hello", // 队列名字\n  true,   // 队列是否持久化\n  false,\n  false,\n  false,\n  nil,\n)\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"rabbitmq交换机持久化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq交换机持久化"}},[s._v("#")]),s._v(" Rabbitmq交换机持久化")]),s._v(" "),n("p",[s._v("声明交换机的时候可以通过属性设置是否需要持久化\ngolang语言声明方式:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('err = ch.ExchangeDeclare(\n        "exchange",   // 交换机名字\n        "fanout", // 交换机类型\n        true,     // 是否持久化\n        false,    \n        false,   \n        false, \n        nil, \n    )\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"rabbitmq消息持久化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq消息持久化"}},[s._v("#")]),s._v(" Rabbitmq消息持久化")]),s._v(" "),n("p",[s._v("在发布消息的时候，通过消息属性可以设置，消息是否需要持久化。")]),s._v(" "),n("p",[s._v("golang语言消息发布方式:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('err = ch.Publish(\n            "exchange",     // 交换机\n            "", // 路由参数\n            false, \n            false,\n            amqp.Publishing{\n                DeliveryMode:2,  // 消息投递模式，1代表非持久化，2代表持久化，\n                ContentType: "text/plain",\n                Body:        []byte(body),\n            })\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);