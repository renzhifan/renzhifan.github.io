(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{523:function(s,t,a){"use strict";a.r(t);var n=a(33),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[s._v("#")]),s._v(" 说明")]),s._v(" "),a("p",[s._v("composer支持四种自动加载的方式："),a("code",[s._v("**PSR-0 / PSR-4 /Classmap / Files**")]),s._v(" , 其中 "),a("strong",[s._v("PSR-4")]),s._v(" 是当前推荐的加载方式。")]),s._v(" "),a("h2",{attrs:{id:"什么是-psr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-psr"}},[s._v("#")]),s._v(" 什么是 PSR ?")]),s._v(" "),a("p",[s._v("PSR 是 PHP Standards Recommendations（PHP 标准建议）的缩写")]),s._v(" "),a("h2",{attrs:{id:"files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#files"}},[s._v("#")]),s._v(" Files")]),s._v(" "),a("p",[a("code",[s._v("Files")]),s._v(" 是最简单的加载方式，"),a("strong",[s._v("这种方式不管加载的文件是否用到始终都会加载，而不是按需加载")])]),s._v(" "),a("p",[s._v('修改项目根目下的composer.json, 加入 "autoload" 项：')]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"require"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"monolog/monolog"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"1.0.*"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"autoload"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"files"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"controllers/Controller.php"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("需要加载哪个文件，直接写入文件路径即可，路径相对项目的根目录。然后执行"),a("code",[s._v("composer dump-autoload")]),s._v("，该命令可以遍历我们项目根目录以及各依赖库下的 "),a("code",[s._v("composer.json")]),s._v(" 文件然后重新生成 "),a("code",[s._v("vendor/composer/autoload_")]),s._v("* 跟自动加载相关的配置文件(运行 "),a("code",[s._v("composer dump-auto")]),s._v(" "),a("strong",[s._v("重新注册自动加载映射关系")]),s._v(")。\n"),a("code",[s._v("composer dump-autoload")]),s._v("之后composer会把配置值写入与 Files加载方式对应的 "),a("code",[s._v("vendor/composer/autoload_files.php")]),s._v("配置文件中。")]),s._v(" "),a("h2",{attrs:{id:"classmap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#classmap"}},[s._v("#")]),s._v(" Classmap")]),s._v(" "),a("p",[s._v("Classmap 加载方式也很简单，composer会搜寻我们指定的目录或文件，并把搜寻到的结果写到Classmap对应的 "),a("code",[s._v("vendor/composer/autoload_classmap.php")]),s._v(" 配置文件中。 修改composer.json :")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"require"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"monolog/monolog"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"1.0.*"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"autoload"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"classmap"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"controllers/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("以上配置会让composer搜寻 controllers 目录下的所有类，并生成配置文件，同样先 "),a("code",[s._v("composer dump-autoload")]),s._v(" 下")]),s._v(" "),a("h2",{attrs:{id:"psr-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#psr-0"}},[s._v("#")]),s._v(" PSR-0")]),s._v(" "),a("blockquote",[a("p",[s._v("这种加载方式已经过时，所以不推荐在新项目中使用，请用 PSR-4 来代替它")])]),s._v(" "),a("p",[s._v("修改composer.json 如下, 然后执行composer dump-autoload")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"require"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"monolog/monolog"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"1.0.*"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"autoload"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"psr-0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"controllers\\\\"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v('以上配置的意思是指定 controllers命名空间 所在的父级目录，由于controllers命名空间所在的父级目录就是项目根目录， 所以配置值用 "" ，composer dump-autoload后配置会写入 PSR-0对应的 vendor/composer/autoload_namespaces.php 配置文件中')]),s._v(" "),a("h2",{attrs:{id:"psr-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#psr-4"}},[s._v("#")]),s._v(" PSR-4")]),s._v(" "),a("p",[s._v("PSR-4 是 PSR-0 的升级版，是目前推荐的自动加载方式，"),a("strong",[s._v("这种方式使用的是按需加载")]),s._v("。\n修改composer.json　如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    "require": {\n        "monolog/monolog": "1.0.*"\n    },\n    "autoload": {\n        "psr-4": {"controllers\\\\": "controllers/"}\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("注意和PSR-0 的 composer.json 做对比，PSR-4 和 PSR-0 的主要区别是，PSR-4指定的就当作当前命名空间的目录， 而PSR-0 指定的是当前命名空间的父目录。composer dump-autoload 一下， 配置会写入PSR-4对应的 "),a("code",[s._v("vendor/composer/autoload_psr4.php")]),s._v(" 文件中")])])}),[],!1,null,null,null);t.default=e.exports}}]);